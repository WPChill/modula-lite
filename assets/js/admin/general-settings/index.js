(()=>{"use strict";var e={20:(e,t,a)=>{var s=a(609),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};t.Fragment=r,t.jsx=function(e,t,a){var s,r={},u=null,c=null;for(s in void 0!==a&&(u=""+a),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,s)&&!o.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:i,type:e,key:u,ref:c,props:r,_owner:l.current}}},848:(e,t,a)=>{e.exports=a(20)},493:(e,t,a)=>{var s=a(609),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=s.useState,n=s.useEffect,l=s.useLayoutEffect,o=s.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!i(e,a)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),s=r({inst:{value:a,getSnapshot:t}}),i=s[0].inst,c=s[1];return l((function(){i.value=a,i.getSnapshot=t,u(i)&&c({inst:i})}),[e,a,t]),n((function(){return u(i)&&c({inst:i}),e((function(){u(i)&&c({inst:i})}))}),[e]),o(a),a};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:c},162:(e,t,a)=>{var s=a(609),i=a(888),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=i.useSyncExternalStore,l=s.useRef,o=s.useEffect,u=s.useMemo,c=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,a,s,i){var d=l(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=u((function(){function e(e){if(!o){if(o=!0,n=e,e=s(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return l=t}return l=e}if(t=l,r(n,e))return t;var a=s(e);return void 0!==i&&i(t,a)?(n=e,t):(n=e,l=a)}var n,l,o=!1,u=void 0===a?null:a;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,a,s,i]);var m=n(e,d[0],d[1]);return o((function(){h.hasValue=!0,h.value=m}),[m]),c(m),m}},888:(e,t,a)=>{e.exports=a(493)},242:(e,t,a)=>{e.exports=a(162)},609:e=>{e.exports=window.React}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var s=a(609);const i=window.wp.element;function r(){const e="undefined"!=typeof modulaUrl?`${modulaUrl}assets/images/logo-dark.webp`:"";return React.createElement(React.Fragment,null,React.createElement("div",{className:"modula-page-header"},React.createElement("div",{className:"modula-header-logo"},React.createElement("img",{src:e,alt:"modula logo",className:"modula-logo"}))))}const n=window.wp.components,l="SET_ACTIVE_TAB",o="SET_OPTIONS",u=(e,t)=>{switch(t.type){case l:return{...e,activeTab:t.payload};case o:return{...e,options:t.payload};case"UPDATE_SETTINGS":return{...e,settings:t.payload};case"TOGGLE_ADVANCED_REGISTRATION":return{...e,isAdvancedRegistration:t.payload};case"SET_LOGGED_IN":return{...e,isLoggedIn:t.payload};default:return e}},c={api_key:"",isAdvancedRegistration:!1,isLoggedIn:!1,activeTab:!1,options:{}},d=(0,i.createContext)(c),h=({children:e})=>{const[t,a]=(0,i.useReducer)(u,c),s={state:t,dispatch:a};return React.createElement(d.Provider,{value:s},e)},m=()=>{const e=(0,i.useContext)(d);if(void 0===e)throw new Error("useStateContext must be used within a SettingsProvider");return e},p=e=>({type:l,payload:e}),f=e=>({type:o,payload:e});var v=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},b="undefined"==typeof window||"Deno"in globalThis;function y(){}function g(e){return"number"==typeof e&&e>=0&&e!==1/0}function R(e,t){return Math.max(e+(t||0)-Date.now(),0)}function E(e,t){return"function"==typeof e?e(t):e}function S(e,t){return"function"==typeof e?e(t):e}function w(e,t){const{type:a="all",exact:s,fetchStatus:i,predicate:r,queryKey:n,stale:l}=e;if(n)if(s){if(t.queryHash!==M(n,t.options))return!1}else if(!F(t.queryKey,n))return!1;if("all"!==a){const e=t.isActive();if("active"===a&&!e)return!1;if("inactive"===a&&e)return!1}return!("boolean"==typeof l&&t.isStale()!==l||i&&i!==t.state.fetchStatus||r&&!r(t))}function _(e,t){const{exact:a,status:s,predicate:i,mutationKey:r}=e;if(r){if(!t.options.mutationKey)return!1;if(a){if(C(t.options.mutationKey)!==C(r))return!1}else if(!F(t.options.mutationKey,r))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function M(e,t){return(t?.queryKeyHashFn||C)(e)}function C(e){return JSON.stringify(e,((e,t)=>A(t)?Object.keys(t).sort().reduce(((e,a)=>(e[a]=t[a],e)),{}):t))}function F(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some((a=>!F(e[a],t[a])))}function O(e,t){if(e===t)return e;const a=k(e)&&k(t);if(a||A(e)&&A(t)){const s=a?e:Object.keys(e),i=s.length,r=a?t:Object.keys(t),n=r.length,l=a?[]:{};let o=0;for(let i=0;i<n;i++){const n=a?i:r[i];(!a&&s.includes(n)||a)&&void 0===e[n]&&void 0===t[n]?(l[n]=void 0,o++):(l[n]=O(e[n],t[n]),l[n]===e[n]&&void 0!==e[n]&&o++)}return i===n&&o===i?e:l}return t}function T(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e)if(e[a]!==t[a])return!1;return!0}function k(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function A(e){if(!I(e))return!1;const t=e.constructor;if(void 0===t)return!0;const a=t.prototype;return!!I(a)&&!!a.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function I(e){return"[object Object]"===Object.prototype.toString.call(e)}function x(e,t,a){return"function"==typeof a.structuralSharing?a.structuralSharing(e,t):!1!==a.structuralSharing?O(e,t):t}function N(e,t,a=0){const s=[...e,t];return a&&s.length>a?s.slice(1):s}function P(e,t,a=0){const s=[t,...e];return a&&s.length>a?s.slice(0,-1):s}var D=Symbol();function V(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==D?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var q=new class extends v{#e;#t;#a;constructor(){super(),this.#a=e=>{if(!b&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#a=e,this.#t?.(),this.#t=e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){return"boolean"==typeof this.#e?this.#e:"hidden"!==globalThis.document?.visibilityState}},j=function(){let e=[],t=0,a=e=>{e()},s=e=>{e()},i=e=>setTimeout(e,0);const r=s=>{t?e.push(s):i((()=>{a(s)}))};return{batch:r=>{let n;t++;try{n=r()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i((()=>{s((()=>{t.forEach((e=>{a(e)}))}))}))})()}return n},batchCalls:e=>(...t)=>{r((()=>{e(...t)}))},schedule:r,setNotifyFunction:e=>{a=e},setBatchNotifyFunction:e=>{s=e},setScheduler:e=>{i=e}}}(),Q=new class extends v{#s=!0;#t;#a;constructor(){super(),this.#a=e=>{if(!b&&window.addEventListener){const t=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#a=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#s!==e&&(this.#s=e,this.listeners.forEach((t=>{t(e)})))}isOnline(){return this.#s}};function B(){let e,t;const a=new Promise(((a,s)=>{e=a,t=s}));function s(e){Object.assign(a,e),delete a.resolve,delete a.reject}return a.status="pending",a.catch((()=>{})),a.resolve=t=>{s({status:"fulfilled",value:t}),e(t)},a.reject=e=>{s({status:"rejected",reason:e}),t(e)},a}function L(e){return Math.min(1e3*2**e,3e4)}function $(e){return"online"!==(e??"online")||Q.isOnline()}var K=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function U(e){return e instanceof K}function H(e){let t,a=!1,s=0,i=!1;const r=B(),n=()=>q.isFocused()&&("always"===e.networkMode||Q.isOnline())&&e.canRun(),l=()=>$(e.networkMode)&&e.canRun(),o=a=>{i||(i=!0,e.onSuccess?.(a),t?.(),r.resolve(a))},u=a=>{i||(i=!0,e.onError?.(a),t?.(),r.reject(a))},c=()=>new Promise((a=>{t=e=>{(i||n())&&a(e)},e.onPause?.()})).then((()=>{t=void 0,i||e.onContinue?.()})),d=()=>{if(i)return;let t;const r=0===s?e.initialPromise:void 0;try{t=r??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(o).catch((t=>{if(i)return;const r=e.retry??(b?0:3),l=e.retryDelay??L,o="function"==typeof l?l(s,t):l,h=!0===r||"number"==typeof r&&s<r||"function"==typeof r&&r(s,t);var m;!a&&h?(s++,e.onFail?.(s,t),(m=o,new Promise((e=>{setTimeout(e,m)}))).then((()=>n()?void 0:c())).then((()=>{a?u(t):d()}))):u(t)}))};return{promise:r,cancel:t=>{i||(u(new K(t)),e.abort?.())},continue:()=>(t?.(),r),cancelRetry:()=>{a=!0},continueRetry:()=>{a=!1},canStart:l,start:()=>(l()?d():c().then(d),r)}}var G=class{#i;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),g(this.gcTime)&&(this.#i=setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(b?1/0:3e5))}clearGcTimeout(){this.#i&&(clearTimeout(this.#i),this.#i=void 0)}},z=class extends G{#r;#n;#l;#o;#u;#c;constructor(e){super(),this.#c=!1,this.#u=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#l=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#r=function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,a=void 0!==t,s=a?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=e.state??this.#r,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#o?.promise}setOptions(e){this.options={...this.#u,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#l.remove(this)}setData(e,t){const a=x(this.state.data,e,this.options);return this.#d({data:a,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),a}setState(e,t){this.#d({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#o?.promise;return this.#o?.cancel(e),t?t.then(y).catch(y):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#r)}isActive(){return this.observers.some((e=>!1!==S(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===D||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!R(this.state.dataUpdatedAt,e)}onFocus(){const e=this.observers.find((e=>e.shouldFetchOnWindowFocus()));e?.refetch({cancelRefetch:!1}),this.#o?.continue()}onOnline(){const e=this.observers.find((e=>e.shouldFetchOnReconnect()));e?.refetch({cancelRefetch:!1}),this.#o?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#l.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.#o&&(this.#c?this.#o.cancel({revert:!0}):this.#o.cancelRetry()),this.scheduleGc()),this.#l.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#d({type:"invalidate"})}fetch(e,t){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#o)return this.#o.continueRetry(),this.#o.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const a=new AbortController,s=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#c=!0,a.signal)})},i={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const e=V(this.options,t),a={queryKey:this.queryKey,meta:this.meta};return s(a),this.#c=!1,this.options.persister?this.options.persister(e,a,this):e(a)}};s(i),this.options.behavior?.onFetch(i,this),this.#n=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===i.fetchOptions?.meta||this.#d({type:"fetch",meta:i.fetchOptions?.meta});const r=e=>{U(e)&&e.silent||this.#d({type:"error",error:e}),U(e)||(this.#l.config.onError?.(e,this),this.#l.config.onSettled?.(this.state.data,e,this)),this.scheduleGc()};return this.#o=H({initialPromise:t?.initialPromise,fn:i.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{if(void 0!==e){try{this.setData(e)}catch(e){return void r(e)}this.#l.config.onSuccess?.(e,this),this.#l.config.onSettled?.(e,this.state.error,this),this.scheduleGc()}else r(new Error(`${this.queryHash} data is undefined`))},onError:r,onFail:(e,t)=>{this.#d({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#d({type:"pause"})},onContinue:()=>{this.#d({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}),this.#o.start()}#d(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...W(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return U(a)&&a.revert&&this.#n?{...this.#n,fetchStatus:"idle"}:{...t,error:a,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),j.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),this.#l.notify({query:this,type:"updated",action:e})}))}};function W(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var J=class extends v{constructor(e,t){super(),this.options=t,this.#h=e,this.#m=null,this.#p=B(),this.options.experimental_prefetchInRender||this.#p.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#h;#f=void 0;#v=void 0;#b=void 0;#y;#g;#p;#m;#R;#E;#S;#w;#_;#M;#C=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#f.addObserver(this),Y(this.#f,this.options)?this.#F():this.updateResult(),this.#O())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return X(this.#f,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return X(this.#f,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#T(),this.#k(),this.#f.removeObserver(this)}setOptions(e,t){const a=this.options,s=this.#f;if(this.options=this.#h.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof S(this.options.enabled,this.#f))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#A(),this.#f.setOptions(this.options),a._defaulted&&!T(this.options,a)&&this.#h.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#f,observer:this});const i=this.hasListeners();i&&Z(this.#f,s,this.options,a)&&this.#F(),this.updateResult(t),!i||this.#f===s&&S(this.options.enabled,this.#f)===S(a.enabled,this.#f)&&E(this.options.staleTime,this.#f)===E(a.staleTime,this.#f)||this.#I();const r=this.#x();!i||this.#f===s&&S(this.options.enabled,this.#f)===S(a.enabled,this.#f)&&r===this.#M||this.#N(r)}getOptimisticResult(e){const t=this.#h.getQueryCache().build(this.#h,e),a=this.createResult(t,e);return s=a,!T(this.getCurrentResult(),s)&&(this.#b=a,this.#g=this.options,this.#y=this.#f.state),a;var s}getCurrentResult(){return this.#b}trackResult(e,t){const a={};return Object.keys(e).forEach((s=>{Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t?.(s),e[s])})})),a}trackProp(e){this.#C.add(e)}getCurrentQuery(){return this.#f}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#h.defaultQueryOptions(e),a=this.#h.getQueryCache().build(this.#h,t);return a.fetch().then((()=>this.createResult(a,t)))}fetch(e){return this.#F({...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#b)))}#F(e){this.#A();let t=this.#f.fetch(this.options,e);return e?.throwOnError||(t=t.catch(y)),t}#I(){this.#T();const e=E(this.options.staleTime,this.#f);if(b||this.#b.isStale||!g(e))return;const t=R(this.#b.dataUpdatedAt,e)+1;this.#w=setTimeout((()=>{this.#b.isStale||this.updateResult()}),t)}#x(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#f):this.options.refetchInterval)??!1}#N(e){this.#k(),this.#M=e,!b&&!1!==S(this.options.enabled,this.#f)&&g(this.#M)&&0!==this.#M&&(this.#_=setInterval((()=>{(this.options.refetchIntervalInBackground||q.isFocused())&&this.#F()}),this.#M))}#O(){this.#I(),this.#N(this.#x())}#T(){this.#w&&(clearTimeout(this.#w),this.#w=void 0)}#k(){this.#_&&(clearInterval(this.#_),this.#_=void 0)}createResult(e,t){const a=this.#f,s=this.options,i=this.#b,r=this.#y,n=this.#g,l=e!==a?e.state:this.#v,{state:o}=e;let u,c={...o},d=!1;if(t._optimisticResults){const i=this.hasListeners(),r=!i&&Y(e,t),n=i&&Z(e,a,t,s);(r||n)&&(c={...c,...W(o.data,e.options)}),"isRestoring"===t._optimisticResults&&(c.fetchStatus="idle")}let{error:h,errorUpdatedAt:m,status:p}=c;if(t.select&&void 0!==c.data)if(i&&c.data===r?.data&&t.select===this.#R)u=this.#E;else try{this.#R=t.select,u=t.select(c.data),u=x(i?.data,u,t),this.#E=u,this.#m=null}catch(e){this.#m=e}else u=c.data;if(void 0!==t.placeholderData&&void 0===u&&"pending"===p){let e;if(i?.isPlaceholderData&&t.placeholderData===n?.placeholderData)e=i.data;else if(e="function"==typeof t.placeholderData?t.placeholderData(this.#S?.state.data,this.#S):t.placeholderData,t.select&&void 0!==e)try{e=t.select(e),this.#m=null}catch(e){this.#m=e}void 0!==e&&(p="success",u=x(i?.data,e,t),d=!0)}this.#m&&(h=this.#m,u=this.#E,m=Date.now(),p="error");const f="fetching"===c.fetchStatus,v="pending"===p,b="error"===p,y=v&&f,g=void 0!==u,R={status:p,fetchStatus:c.fetchStatus,isPending:v,isSuccess:"success"===p,isError:b,isInitialLoading:y,isLoading:y,data:u,dataUpdatedAt:c.dataUpdatedAt,error:h,errorUpdatedAt:m,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>l.dataUpdateCount||c.errorUpdateCount>l.errorUpdateCount,isFetching:f,isRefetching:f&&!v,isLoadingError:b&&!g,isPaused:"paused"===c.fetchStatus,isPlaceholderData:d,isRefetchError:b&&g,isStale:ee(e,t),refetch:this.refetch,promise:this.#p};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===R.status?e.reject(R.error):void 0!==R.data&&e.resolve(R.data)},s=()=>{const e=this.#p=R.promise=B();t(e)},i=this.#p;switch(i.status){case"pending":e.queryHash===a.queryHash&&t(i);break;case"fulfilled":"error"!==R.status&&R.data===i.value||s();break;case"rejected":"error"===R.status&&R.error===i.reason||s()}}return R}updateResult(e){const t=this.#b,a=this.createResult(this.#f,this.options);if(this.#y=this.#f.state,this.#g=this.options,void 0!==this.#y.data&&(this.#S=this.#f),T(a,t))return;this.#b=a;const s={};!1!==e?.listeners&&(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,a="function"==typeof e?e():e;if("all"===a||!a&&!this.#C.size)return!0;const s=new Set(a??this.#C);return this.options.throwOnError&&s.add("error"),Object.keys(this.#b).some((e=>{const a=e;return this.#b[a]!==t[a]&&s.has(a)}))})()&&(s.listeners=!0),this.#P({...s,...e})}#A(){const e=this.#h.getQueryCache().build(this.#h,this.options);if(e===this.#f)return;const t=this.#f;this.#f=e,this.#v=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#O()}#P(e){j.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(this.#b)})),this.#h.getQueryCache().notify({query:this.#f,type:"observerResultsUpdated"})}))}};function Y(e,t){return function(e,t){return!1!==S(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&X(e,t,t.refetchOnMount)}function X(e,t,a){if(!1!==S(t.enabled,e)){const s="function"==typeof a?a(e):a;return"always"===s||!1!==s&&ee(e,t)}return!1}function Z(e,t,a,s){return(e!==t||!1===S(s.enabled,e))&&(!a.suspense||"error"!==e.state.status)&&ee(e,a)}function ee(e,t){return!1!==S(t.enabled,e)&&e.isStaleByTime(E(t.staleTime,e))}var te=a(848),ae=s.createContext(void 0),se=e=>{const t=s.useContext(ae);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ie=({client:e,children:t})=>(s.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),(0,te.jsx)(ae.Provider,{value:e,children:t}));var re=s.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}());function ne(e,t){return"function"==typeof e?e(...t):!!e}function le(){}var oe=s.createContext(!1),ue=(oe.Provider,(e,t,a)=>t.fetchOptimistic(e).catch((()=>{a.clearReset()})));function ce(e,t){return function(e,t,a){const i=se(a),r=s.useContext(oe),n=s.useContext(re),l=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=r?"isRestoring":"optimistic",(e=>{const t=e.staleTime;e.suspense&&(e.staleTime="function"==typeof t?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))})(l),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(l,n),(e=>{s.useEffect((()=>{e.clearReset()}),[e])})(n);const o=!i.getQueryCache().get(l.queryHash),[u]=s.useState((()=>new t(i,l))),c=u.getOptimisticResult(l),d=!r&&!1!==e.subscribed;if(s.useSyncExternalStore(s.useCallback((e=>{const t=d?u.subscribe(j.batchCalls(e)):le;return u.updateResult(),t}),[u,d]),(()=>u.getCurrentResult()),(()=>u.getCurrentResult())),s.useEffect((()=>{u.setOptions(l,{listeners:!1})}),[l,u]),((e,t)=>e?.suspense&&t.isPending)(l,c))throw ue(l,u,n);if((({result:e,errorResetBoundary:t,throwOnError:a,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&ne(a,[e.error,s]))({result:c,errorResetBoundary:n,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash)}))throw c.error;if(i.getDefaultOptions().queries?._experimental_afterQuery?.(l,c),l.experimental_prefetchInRender&&!b&&((e,t)=>e.isLoading&&e.isFetching&&!t)(c,r)){const e=o?ue(l,u,n):i.getQueryCache().get(l.queryHash)?.promise;e?.catch(le).finally((()=>{u.updateResult()}))}return l.notifyOnChangeProps?c:u.trackResult(c)}(e,J,t)}const de=window.wp.apiFetch;var he=a.n(de);const me=()=>ce({queryKey:["settings-tabs-query"],retry:1,queryFn:async()=>await he()({path:"/modula-best-grid-gallery/v1/general-settings-tabs",method:"GET"})});function pe(){const{state:e,dispatch:t}=m(),{data:a,isLoading:s}=me();if((0,i.useEffect)((()=>{if(!e.activeTab&&"undefined"!==a&&!s){const e=a.find((e=>void 0===e.type||"button"===e.type));e&&t(p(e.slug))}}),[e.activeTab,t,a,s]),"undefined"!==a&&!s)return React.createElement("div",{className:"modula-page-navigation"},a.map((({label:a,slug:s,type:i="button",target:r=!1})=>{const l="link"===i;return React.createElement(n.Button,{key:s,href:l?s:void 0,target:l&&r?"_blank":void 0,rel:l&&r?"noopener noreferrer":void 0,onClick:l?void 0:()=>t(p(s)),className:"modula-header-button "+(e.activeTab===s?"modula-header-button-active":"")},a)})))}function fe(e,t){return"function"==typeof e?e(t):e}function ve(e,t){return Me(t).reduce(((e,t)=>null===e?null:void 0!==e?e[t]:void 0),e)}function be(e,t,a){const s=Me(t);return function e(t){if(!s.length)return fe(a,t);const i=s.shift();if("string"==typeof i||"number"==typeof i&&!Array.isArray(t))return"object"==typeof t?(null===t&&(t={}),{...t,[i]:e(t[i])}):{[i]:e()};if(Array.isArray(t)&&"number"==typeof i){const a=t.slice(0,i);return[...a.length?a:new Array(i),e(t[i]),...t.slice(i+1)]}return[...new Array(i),e()]}(e)}const ye=/^(\d*)$/gm,ge=/\.(\d*)\./gm,Re=/^(\d*)\./gm,Ee=/\.(\d*$)/gm,Se=/\.{2,}/gm,we="__int__",_e=`${we}$1`;function Me(e){if(Array.isArray(e))return[...e];if("string"!=typeof e)throw new Error("Path must be a string.");return e.replaceAll("[",".").replaceAll("]","").replace(ye,_e).replace(ge,`.${_e}.`).replace(Re,`${_e}.`).replace(Ee,`.${_e}`).replace(Se,".").split(".").map((e=>0===e.indexOf(we)?parseInt(e.substring(we.length),10):e))}function Ce(e,t){const{asyncDebounceMs:a}=t,{onChangeAsync:s,onBlurAsync:i,onSubmitAsync:r,onBlurAsyncDebounceMs:n,onChangeAsyncDebounceMs:l}=t.validators||{},o=a??0,u={cause:"change",validate:s,debounceMs:l??o},c={cause:"blur",validate:i,debounceMs:n??o},d={cause:"submit",validate:r,debounceMs:0},h=e=>({...e,debounceMs:0});switch(e){case"submit":return[h(u),h(c),d];case"blur":return[c];case"change":return[u];default:return[]}}function Fe(e,t){const{onChange:a,onBlur:s,onSubmit:i,onMount:r}=t.validators||{},n={cause:"change",validate:a},l={cause:"blur",validate:s},o={cause:"submit",validate:i},u={cause:"mount",validate:r},c={cause:"server",validate:()=>{}};switch(e){case"mount":return[u];case"submit":return[n,l,o,c];case"server":return[c];case"blur":return[l,c];default:return[n,c]}}class Oe{constructor(e,t){this.listeners=new Set,this.subscribe=e=>{var t,a;this.listeners.add(e);const s=null==(a=null==(t=this.options)?void 0:t.onSubscribe)?void 0:a.call(t,e,this);return()=>{this.listeners.delete(e),null==s||s()}},this.setState=e=>{var t,a,s;this.prevState=this.state,this.state=(null==(t=this.options)?void 0:t.updateFn)?this.options.updateFn(this.prevState)(e):e(this.prevState),null==(s=null==(a=this.options)?void 0:a.onUpdate)||s.call(a),Qe(this)},this.prevState=e,this.state=e,this.options=t}}class Te{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const e=[],t=[];for(const a of this.options.deps)e.push(a.prevState),t.push(a.state);return this.lastSeenDepValues=t,{prevDepVals:e,currDepVals:t,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,t;this.prevState=this.state;const{prevDepVals:a,currDepVals:s,prevVal:i}=this.getDepVals();this.state=this.options.fn({prevDepVals:a,currDepVals:s,prevVal:i}),null==(t=(e=this.options).onUpdate)||t.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(const e of this.options.deps)e instanceof Te&&e.checkIfRecalculationNeededDeeply();let e=!1;const t=this.lastSeenDepValues,{currDepVals:a}=this.getDepVals();for(let s=0;s<a.length;s++)if(a[s]!==t[s]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const e of this._subscriptions)e()}),this.subscribe=e=>{var t,a;this.listeners.add(e);const s=null==(a=(t=this.options).onSubscribe)?void 0:a.call(t,e,this);return()=>{this.listeners.delete(e),null==s||s()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof Te)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof Oe){let e=ke.get(t);e||(e=new Set,ke.set(t,e)),e.add(this);let a=Ae.get(this);a||(a=new Set,Ae.set(this,a)),a.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof Te)this.unregisterFromGraph(t.options.deps);else if(t instanceof Oe){const e=ke.get(t);e&&e.delete(this);const a=Ae.get(this);a&&a.delete(t)}}}const ke=new WeakMap,Ae=new WeakMap,Ie={current:[]};let xe=!1,Ne=0;const Pe=new Set,De=new Map;function Ve(e){const t=Array.from(e).sort(((e,t)=>e instanceof Te&&e.options.deps.includes(t)?1:t instanceof Te&&t.options.deps.includes(e)?-1:0));for(const e of t){if(Ie.current.includes(e))continue;Ie.current.push(e),e.recompute();const t=Ae.get(e);if(t)for(const e of t){const t=ke.get(e);t&&Ve(t)}}}function qe(e){e.listeners.forEach((t=>t({prevVal:e.prevState,currentVal:e.state})))}function je(e){e.listeners.forEach((t=>t({prevVal:e.prevState,currentVal:e.state})))}function Qe(e){if(Ne>0&&!De.has(e)&&De.set(e,e.prevState),Pe.add(e),!(Ne>0||xe))try{for(xe=!0;Pe.size>0;){const e=Array.from(Pe);Pe.clear();for(const t of e){const e=De.get(t)??t.prevState;t.prevState=e,qe(t)}for(const t of e){const e=ke.get(t);e&&(Ie.current.push(t),Ve(e))}for(const t of e){const e=ke.get(t);if(e)for(const t of e)je(t)}}}finally{xe=!1,Ie.current=[],De.clear()}}function Be(e){Ne++;try{e()}finally{if(Ne--,0===Ne){const e=Array.from(Pe)[0];e&&Qe(e)}}}function Le(e,t){const a=new Map;for(const t of e){const e=[...t.path??[]].map((e=>{const t="object"==typeof e?e.key:e;return"number"==typeof t?`[${t}]`:t})).join(".").replace(/\.\[/g,"[");a.set(e,(a.get(e)??[]).concat(t))}const s={};return a.forEach(((e,a)=>{s[a]=t(e)})),s}const $e=(e={})=>()=>{const t=e.transformErrors??(e=>e.map((e=>e.message)).join(", ")),a=e=>{return"form"===e?(a=t,e=>({form:a(e),fields:Le(e,a)})):t;var a};return{validate({value:e,validationSource:t},s){const i=s["~standard"].validate(e);if(i instanceof Promise)throw new Error("async function passed to sync validator");if(i.issues)return a(t)(i.issues)},async validateAsync({value:e,validationSource:t},s){const i=await s["~standard"].validate(e);if(i.issues)return a(t)(i.issues)}}},Ke=e=>!!e&&"~standard"in e;function Ue(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class He{constructor(e){var t;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const e=this.fieldMetaDerived.mount(),t=this.store.mount(),a=()=>{e(),t()},{onMount:s}=this.options.validators||{};return s?(this.validateSync("mount"),a):a},this.update=e=>{if(!e)return;const t=this.options;this.options=e,Be((()=>{const a=e.defaultValues&&e.defaultValues!==t.defaultValues&&!this.state.isTouched,s=e.defaultState!==t.defaultState&&!this.state.isTouched;this.baseStore.setState((()=>Ue(Object.assign({},this.state,s?e.defaultState:{},a?{values:e.defaultValues}:{}))))}))},this.reset=(e,t)=>{const{fieldMeta:a}=this.state,s=this.resetFieldMeta(a);e&&!(null==t?void 0:t.keepDefaultValues)&&(this.options={...this.options,defaultValues:e}),this.baseStore.setState((()=>{var t;return Ue({...this.options.defaultState,values:e??this.options.defaultValues??(null==(t=this.options.defaultState)?void 0:t.values),fieldMetaBase:s})}))},this.validateAllFields=async e=>{const t=[];return Be((()=>{Object.values(this.fieldInfo).forEach((a=>{if(!a.instance)return;const s=a.instance;t.push(Promise.resolve().then((()=>s.validate(e)))),a.instance.state.meta.isTouched||a.instance.setMeta((e=>({...e,isTouched:!0})))}))})),(await Promise.all(t)).flat()},this.validateArrayFieldsStartingFrom=async(e,t,a)=>{const s=this.getFieldValue(e),i=Array.isArray(s)?Math.max(s.length-1,0):null,r=[`${e}[${t}]`];for(let a=t+1;a<=(i??0);a++)r.push(`${e}[${a}]`);const n=Object.keys(this.fieldInfo).filter((e=>r.some((t=>e.startsWith(t))))),l=[];return Be((()=>{n.forEach((e=>{l.push(Promise.resolve().then((()=>this.validateField(e,a))))}))})),(await Promise.all(l)).flat()},this.validateField=(e,t)=>{var a;const s=null==(a=this.fieldInfo[e])?void 0:a.instance;return s?(s.state.meta.isTouched||s.setMeta((e=>({...e,isTouched:!0}))),s.validate(t)):[]},this.validateSync=e=>{const t=Fe(e,this.options);let a=!1;const s={};Be((()=>{for(const e of t){if(!e.validate)continue;const t=this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:i,fieldErrors:r}=Ge(t),n=ze(e.cause);if(r)for(const[e,t]of Object.entries(r)){const a={...s[e]||{},[n]:t};s[e]=a;const i=this.getFieldMeta(e);i&&i.errorMap[n]!==t&&this.setFieldMeta(e,(e=>({...e,errorMap:{...e.errorMap,[n]:t}})))}this.state.errorMap[n]!==i&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[n]:i}}))),(i||r)&&(a=!0)}}));const i=ze("submit");return this.state.errorMap[i]&&"submit"!==e&&!a&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[i]:void 0}}))),{hasErrored:a,fieldsErrorMap:s}},this.validateAsync=async e=>{const t=Ce(e,this.options);this.state.isFormValidating||this.baseStore.setState((e=>({...e,isFormValidating:!0})));const a=[];let s;for(const e of t){if(!e.validate)continue;const t=ze(e.cause),i=this.state.validationMetaMap[t];null==i||i.lastAbortController.abort();const r=new AbortController;this.state.validationMetaMap[t]={lastAbortController:r},a.push(new Promise((async t=>{let a;try{a=await new Promise(((t,a)=>{setTimeout((async()=>{if(r.signal.aborted)return t(void 0);try{t(await this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:r.signal},type:"validateAsync"}))}catch(e){a(e)}}),e.debounceMs)}))}catch(e){a=e}const{formError:i,fieldErrors:n}=Ge(a);n&&(s=s?{...s,...n}:n);const l=ze(e.cause);if(s)for(const[e,t]of Object.entries(s)){const a=this.getFieldMeta(e);a&&a.errorMap[l]!==t&&this.setFieldMeta(e,(e=>({...e,errorMap:{...e.errorMap,[l]:t}})))}this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[l]:i}}))),t(s?{fieldErrors:s,errorMapKey:l}:void 0)})))}let i=[];const r={};if(a.length){i=await Promise.all(a);for(const e of i)if(null==e?void 0:e.fieldErrors){const{errorMapKey:t}=e;for(const[a,s]of Object.entries(e.fieldErrors)){const e={...r[a]||{},[t]:s};r[a]=e}}}return this.baseStore.setState((e=>({...e,isFormValidating:!1}))),r},this.validate=e=>{const{hasErrored:t,fieldsErrorMap:a}=this.validateSync(e);return t&&!this.options.asyncAlways?a:this.validateAsync(e)},this.handleSubmit=async()=>{var e,t,a,s;if(this.baseStore.setState((e=>({...e,isSubmitted:!1,submissionAttempts:e.submissionAttempts+1}))),!this.state.canSubmit)return;this.baseStore.setState((e=>({...e,isSubmitting:!0})));const i=()=>{this.baseStore.setState((e=>({...e,isSubmitting:!1})))};if(await this.validateAllFields("submit"),!this.state.isValid)return i(),void(null==(t=(e=this.options).onSubmitInvalid)||t.call(e,{value:this.state.values,formApi:this}));Be((()=>{Object.values(this.fieldInfo).forEach((e=>{var t,a,s;null==(s=null==(a=null==(t=e.instance)?void 0:t.options.listeners)?void 0:a.onSubmit)||s.call(a,{value:e.instance.state.value,fieldApi:e.instance})}))}));try{await(null==(s=(a=this.options).onSubmit)?void 0:s.call(a,{value:this.state.values,formApi:this})),Be((()=>{this.baseStore.setState((e=>({...e,isSubmitted:!0}))),i()}))}catch(e){throw i(),e}},this.getFieldValue=e=>ve(this.state.values,e),this.getFieldMeta=e=>this.state.fieldMeta[e],this.getFieldInfo=e=>{var t;return(t=this.fieldInfo)[e]||(t[e]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(e,t)=>{this.baseStore.setState((a=>({...a,fieldMetaBase:{...a.fieldMetaBase,[e]:fe(t,a.fieldMetaBase[e])}})))},this.resetFieldMeta=e=>Object.keys(e).reduce(((e,t)=>(e[t]={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}},e)),{}),this.setFieldValue=(e,t,a)=>{const s=(null==a?void 0:a.dontUpdateMeta)??!1;Be((()=>{s||this.setFieldMeta(e,(e=>({...e,isTouched:!0,isDirty:!0,errorMap:{...null==e?void 0:e.errorMap,onMount:void 0}}))),this.baseStore.setState((a=>({...a,values:be(a.values,e,t)})))}))},this.deleteField=e=>{this.baseStore.setState((t=>{const a={...t};return a.values=function(e,t){const a=Me(t);return function e(t){if(!t)return;if(1===a.length){const e=a[0];if(Array.isArray(t)&&"number"==typeof e)return t.filter(((t,a)=>a!==e));const{[e]:s,...i}=t;return i}const s=a.shift();if("string"==typeof s&&"object"==typeof t)return{...t,[s]:e(t[s])};if("number"==typeof s&&Array.isArray(t)){if(s>=t.length)return t;const a=t.slice(0,s);return[...a.length?a:new Array(s),e(t[s]),...t.slice(s+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}(e)}(a.values,e),delete a.fieldMetaBase[e],a})),delete this.fieldInfo[e]},this.pushFieldValue=(e,t,a)=>{this.setFieldValue(e,(e=>[...Array.isArray(e)?e:[],t]),a),this.validateField(e,"change")},this.insertFieldValue=async(e,t,a,s)=>{this.setFieldValue(e,(e=>[...e.slice(0,t),a,...e.slice(t)]),s),await this.validateField(e,"change")},this.replaceFieldValue=async(e,t,a,s)=>{this.setFieldValue(e,(e=>e.map(((e,s)=>s===t?a:e))),s),await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change")},this.removeFieldValue=async(e,t,a)=>{const s=this.getFieldValue(e),i=Array.isArray(s)?Math.max(s.length-1,0):null;if(this.setFieldValue(e,(e=>e.filter(((e,a)=>a!==t))),a),null!==i){const t=`${e}[${i}]`;Object.keys(this.fieldInfo).filter((e=>e.startsWith(t))).forEach((e=>this.deleteField(e)))}await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change")},this.swapFieldValues=(e,t,a,s)=>{this.setFieldValue(e,(e=>{const s=e[t],i=e[a];return be(be(e,`${t}`,i),`${a}`,s)}),s),this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${a}]`,"change")},this.moveFieldValues=(e,t,a,s)=>{this.setFieldValue(e,(e=>(e.splice(a,0,e.splice(t,1)[0]),e)),s),this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${a}]`,"change")},this.baseStore=new Oe(Ue({...null==e?void 0:e.defaultState,values:(null==e?void 0:e.defaultValues)??(null==(t=null==e?void 0:e.defaultState)?void 0:t.values),isFormValid:!0})),this.fieldMetaDerived=new Te({deps:[this.baseStore],fn:({prevDepVals:e,currDepVals:t,prevVal:a})=>{const s=a,i=null==e?void 0:e[0],r=t[0],n={};for(const e of Object.keys(r.fieldMetaBase)){const t=r.fieldMetaBase[e],a=null==i?void 0:i.fieldMetaBase[e],l=null==s?void 0:s[e];let o=null==l?void 0:l.errors;a&&t.errorMap===a.errorMap||(o=Object.values(t.errorMap??{}).filter((e=>void 0!==e)));const u=!t.isDirty;l&&l.isPristine===u&&l.errors===o&&t===a?n[e]=l:n[e]={...t,errors:o,isPristine:u}}return n}}),this.store=new Te({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:e,currDepVals:t,prevVal:a})=>{var s,i,r,n;const l=a,o=null==e?void 0:e[0],u=t[0],c=Object.values(u.fieldMetaBase),d=c.some((e=>null==e?void 0:e.isValidating)),h=!c.some((e=>{return(null==e?void 0:e.errorMap)&&(t=Object.values(e.errorMap).filter(Boolean),!(Array.isArray(t)&&0===t.length));var t})),m=c.some((e=>null==e?void 0:e.isTouched)),p=c.some((e=>null==e?void 0:e.isBlurred)),f=m&&(null==(s=null==u?void 0:u.errorMap)?void 0:s.onMount),v=c.some((e=>null==e?void 0:e.isDirty)),b=!v,y=Boolean((null==(i=u.errorMap)?void 0:i.onMount)||c.some((e=>{var t;return null==(t=null==e?void 0:e.errorMap)?void 0:t.onMount}))),g=!!d;let R=(null==l?void 0:l.errors)??[];o&&u.errorMap===o.errorMap||(R=Object.values(u.errorMap).reduce(((e,t)=>void 0===t?e:"string"==typeof t?(e.push(t),e):t&&"object"==typeof t?(e.push(t.form),e):e),[]));const E=0===R.length,S=h&&E,w=0===u.submissionAttempts&&!m&&!y||!g&&!u.isSubmitting&&S;let _=u.errorMap;f&&(R=R.filter((e=>e!==u.errorMap.onMount)),_=Object.assign(_,{onMount:void 0}));let M={...u,errorMap:_,fieldMeta:this.fieldMetaDerived.state,errors:R,isFieldsValidating:d,isFieldsValid:h,isFormValid:E,isValid:S,canSubmit:w,isTouched:m,isBlurred:p,isPristine:b,isDirty:v};const C=(null==(r=this.options.transform)?void 0:r.deps)??[];if(C.length!==this.prevTransformArray.length||C.some(((e,t)=>e!==this.prevTransformArray[t]))){const e=Object.assign({},this,{state:M});null==(n=this.options.transform)||n.fn(e),M=e.state,this.prevTransformArray=C}return M}}),this.update(e||{})}get state(){return this.store.state}runValidator(e){const t=this.options.validatorAdapter;return t&&("function"!=typeof e.validate||"~standard"in e.validate)?t()[e.type](e.value,e.validate):Ke(e.validate)?$e()()[e.type](e.value,e.validate):e.validate(e.value)}setErrorMap(e){this.baseStore.setState((t=>({...t,errorMap:{...t.errorMap,...e}})))}}function Ge(e){return e?"object"==typeof e?{formError:Ge(e.form).formError,fieldErrors:e.fields}:"string"!=typeof e?{formError:"Invalid Form Values"}:{formError:e}:{formError:void 0}}function ze(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";default:return"onChange"}}var We=a(242);function Je(e,t=e=>e){return(0,We.useSyncExternalStoreWithSelector)(e.subscribe,(()=>e.state),(()=>e.state),t,Ye)}function Ye(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,s]of e)if(!t.has(a)||!Object.is(s,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!1;for(let s=0;s<a.length;s++)if(!Object.prototype.hasOwnProperty.call(t,a[s])||!Object.is(e[a[s]],t[a[s]]))return!1;return!0}class Xe{constructor(e){this.options={},this.mount=()=>{var e,t;const a=this.store.mount();this.getInfo().instance=this,this.update(this.options);const{onMount:s}=this.options.validators||{};if(s){const e=this.runValidator({validate:s,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});e&&this.setMeta((t=>({...t,errorMap:{...null==t?void 0:t.errorMap,onMount:e}})))}return null==(t=null==(e=this.options.listeners)?void 0:e.onMount)||t.call(e,{value:this.state.value,fieldApi:this}),a},this.update=e=>{if(void 0===this.state.value){const t=ve(e.form.options.defaultValues,e.name);void 0!==e.defaultValue?this.setValue(e.defaultValue,{dontUpdateMeta:!0}):void 0!==t&&this.setValue(t,{dontUpdateMeta:!0})}void 0===this.form.getFieldMeta(this.name)&&this.setMeta(this.state.meta),this.options=e,this.name=e.name},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(e,t)=>{var a,s;this.form.setFieldValue(this.name,e,t),null==(s=null==(a=this.options.listeners)?void 0:a.onChange)||s.call(a,{value:this.state.value,fieldApi:this}),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=e=>this.form.setFieldMeta(this.name,e),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(e,t)=>this.form.pushFieldValue(this.name,e,t),this.insertValue=(e,t,a)=>this.form.insertFieldValue(this.name,e,t,a),this.replaceValue=(e,t,a)=>this.form.replaceFieldValue(this.name,e,t,a),this.removeValue=(e,t)=>this.form.removeFieldValue(this.name,e,t),this.swapValues=(e,t,a)=>this.form.swapFieldValues(this.name,e,t,a),this.moveValue=(e,t,a)=>this.form.moveFieldValues(this.name,e,t,a),this.getLinkedFields=e=>{const t=Object.values(this.form.fieldInfo),a=[];for(const s of t){if(!s.instance)continue;const{onChangeListenTo:t,onBlurListenTo:i}=s.instance.options.validators||{};"change"===e&&(null==t?void 0:t.includes(this.name))&&a.push(s.instance),"blur"===e&&(null==i?void 0:i.includes(this.name))&&a.push(s.instance)}return a},this.validateSync=(e,t)=>{const a=Fe(e,this.options),s=this.getLinkedFields(e).reduce(((t,a)=>{const s=Fe(e,a.options);return s.forEach((e=>{e.field=a})),t.concat(s)}),[]);let i=!1;Be((()=>{const e=(e,a)=>{const s=et(a.cause),r=a.validate?Ze(e.runValidator({validate:a.validate,value:{value:e.store.state.value,validationSource:"field",fieldApi:e},type:"validate"})):t[s];e.state.meta.errorMap[s]!==r&&e.setMeta((e=>({...e,errorMap:{...e.errorMap,[et(a.cause)]:r||t[s]}}))),(r||t[s])&&(i=!0)};for(const t of a)e(this,t);for(const t of s)t.validate&&e(t.field,t)}));const r=et("submit");return this.state.meta.errorMap[r]&&"submit"!==e&&!i&&this.setMeta((e=>({...e,errorMap:{...e.errorMap,[r]:void 0}}))),{hasErrored:i}},this.validateAsync=async(e,t)=>{const a=Ce(e,this.options),s=await t,i=this.getLinkedFields(e),r=i.reduce(((t,a)=>{const s=Ce(e,a.options);return s.forEach((e=>{e.field=a})),t.concat(s)}),[]);this.state.meta.isValidating||this.setMeta((e=>({...e,isValidating:!0})));for(const e of i)e.setMeta((e=>({...e,isValidating:!0})));const n=[],l=[],o=(e,t,a)=>{const i=et(t.cause),r=e.getInfo().validationMetaMap[i];null==r||r.lastAbortController.abort();const n=new AbortController;this.getInfo().validationMetaMap[i]={lastAbortController:n},a.push(new Promise((async a=>{var r;let l;try{l=await new Promise(((a,s)=>{this.timeoutIds[t.cause]&&clearTimeout(this.timeoutIds[t.cause]),this.timeoutIds[t.cause]=setTimeout((async()=>{if(n.signal.aborted)return a(void 0);try{a(await this.runValidator({validate:t.validate,value:{value:e.store.state.value,fieldApi:e,signal:n.signal,validationSource:"field"},type:"validateAsync"}))}catch(e){s(e)}}),t.debounceMs)}))}catch(e){l=e}if(n.signal.aborted)return a(void 0);const o=Ze(l),u=null==(r=s[this.name])?void 0:r[i],c=o||u;e.setMeta((e=>({...e,errorMap:{...null==e?void 0:e.errorMap,[i]:c}}))),a(c)})))};for(const e of a)e.validate&&o(this,e,n);for(const e of r)e.validate&&o(e.field,e,l);let u=[];(n.length||l.length)&&(u=await Promise.all(n),await Promise.all(l)),this.setMeta((e=>({...e,isValidating:!1})));for(const e of i)e.setMeta((e=>({...e,isValidating:!1})));return u.filter(Boolean)},this.validate=e=>{var t;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:a}=this.form.validateSync(e),{hasErrored:s}=this.validateSync(e,a[this.name]??{});if(s&&!this.options.asyncAlways)return null==(t=this.getInfo().validationMetaMap[et(e)])||t.lastAbortController.abort(),this.state.meta.errors;const i=this.form.validateAsync(e);return this.validateAsync(e,i)},this.handleChange=e=>{this.setValue(e)},this.handleBlur=()=>{var e,t;this.state.meta.isTouched||(this.setMeta((e=>({...e,isTouched:!0}))),this.validate("change")),this.state.meta.isBlurred||this.setMeta((e=>({...e,isBlurred:!0}))),this.validate("blur"),null==(t=null==(e=this.options.listeners)?void 0:e.onBlur)||t.call(e,{value:this.state.value,fieldApi:this})},this.form=e.form,this.name=e.name,this.timeoutIds={},void 0!==e.defaultValue&&this.form.setFieldValue(this.name,e.defaultValue,{dontUpdateMeta:!0}),this.store=new Te({deps:[this.form.store],fn:()=>({value:this.form.getFieldValue(this.name),meta:this.form.getFieldMeta(this.name)??{isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{},...e.defaultMeta}})}),this.options=e}get state(){return this.store.state}runValidator(e){const t=[this.form.options.validatorAdapter,this.options.validatorAdapter];for(const a of t)if(a&&("function"!=typeof e.validate||"~standard"in e.validate))return a()[e.type](e.value,e.validate);return Ke(e.validate)?$e()()[e.type](e.value,e.validate):e.validate(e.value)}setErrorMap(e){this.setMeta((t=>({...t,errorMap:{...t.errorMap,...e}})))}}function Ze(e){if(e)return"string"!=typeof e?"Invalid Form Values":e}function et(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";default:return"onChange"}}const tt="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,at=({children:e,...t})=>{const a=function(e){const[t]=(0,s.useState)((()=>{const t=new Xe({...e,form:e.form,name:e.name});return t.Field=at,t}));return tt(t.mount,[t]),tt((()=>{t.update(e)})),Je(t.store,"array"===e.mode?e=>[e.meta,Object.keys(e.value??[]).length]:void 0),t}(t),i=(0,s.useMemo)((()=>fe(e,a)),[e,a,a.state.value,a.state.meta]);return(0,te.jsx)(te.Fragment,{children:i})};function st({form:e,selector:t,children:a}){return fe(a,Je(e.store,t))}function it(e){const[t]=(0,s.useState)((()=>{const t=new He(e),a=t;return a.Field=function(e){return(0,te.jsx)(at,{...e,form:t})},a.Subscribe=e=>(0,te.jsx)(st,{form:t,selector:e.selector,children:e.children}),a}));return tt(t.mount,[]),Je(t.store,(e=>e.isSubmitting)),tt((()=>{t.update(e)})),t}const rt={modulaToggle:"ayHyBmgI1XDhnl1heGk8",modulaToggleItems:"jwF1q6xwR3gX7xymuDjs",modulaToggleLabel:"JzFje6adbcI1Uf6oZNtX",modulaToggleInput:"Ju3CWaetLeVOIM4vnCez",modulaToggleTrack:"ymwGun3xUsypmF3_dP8W",modulaToggleThumb:"K99mNKZv0YyHfD1xnZVR",modulaToggleOff:"wKYFix8m95ObH9dRYsi8",modulaToggleOn:"Nisw6vcFV43jSBVD42eB"};function nt({fieldState:e,field:t,handleChange:a,className:s,disabled:i}){return React.createElement(React.Fragment,null,React.createElement("div",{className:`${rt.modulaToggle} ${s||""} ${i?rt.modulaToggleDisabled:""}`},React.createElement("label",{className:rt.modulaToggleLabel,htmlFor:t.name},t.label),React.createElement("input",{id:t.name,className:rt.modulaToggleInput,type:"checkbox",name:`modula-settings[${t.name}]`,value:"1",checked:e.state.value,onChange:e=>a(e.target.checked),disabled:i?"disabled":""}),React.createElement("div",{className:rt.modulaToggleItems},React.createElement("span",{className:rt.modulaToggleTrack}),React.createElement("span",{className:rt.modulaToggleThumb}),React.createElement("svg",{className:rt.modulaToggleOff,width:"6",height:"6","aria-hidden":"true",role:"img",focusable:"false",viewBox:"0 0 6 6"},React.createElement("path",{d:"M3 1.5c.8 0 1.5.7 1.5 1.5S3.8 4.5 3 4.5 1.5 3.8 1.5 3 2.2 1.5 3 1.5M3 0C1.3 0 0 1.3 0 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3z"})),React.createElement("svg",{className:rt.modulaToggleOn,width:"2",height:"6","aria-hidden":"true",role:"img",focusable:"false",viewBox:"0 0 2 6"},React.createElement("path",{d:"M0 0h2v6H0z"})))),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function lt({fieldState:e,field:t,handleChange:a,trueValue:s="enabled",falseValue:i="disabled",className:r,disabled:n=!1}){const l=e.state.value===s;return React.createElement(React.Fragment,null,React.createElement("div",{className:`${rt.modulaToggle} ${r||""} ${n?rt.modulaToggleDisabled:""}`},React.createElement("label",{className:rt.modulaToggleLabel,htmlFor:t.name},t.label),React.createElement("input",{id:t.name,className:rt.modulaToggleInput,type:"checkbox",name:`modula-settings[${t.name}]`,value:s,checked:l,onChange:e=>{return t=e.target.checked,void a(t?s:i);var t},disabled:n?"disabled":""}),React.createElement("div",{className:rt.modulaToggleItems},React.createElement("span",{className:rt.modulaToggleTrack}),React.createElement("span",{className:rt.modulaToggleThumb}),React.createElement("svg",{className:rt.modulaToggleOff,width:"6",height:"6","aria-hidden":"true",role:"img",focusable:"false",viewBox:"0 0 6 6"},React.createElement("path",{d:"M3 1.5c.8 0 1.5.7 1.5 1.5S3.8 4.5 3 4.5 1.5 3.8 1.5 3 2.2 1.5 3 1.5M3 0C1.3 0 0 1.3 0 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3z"})),React.createElement("svg",{className:rt.modulaToggleOn,width:"2",height:"6","aria-hidden":"true",role:"img",focusable:"false",viewBox:"0 0 2 6"},React.createElement("path",{d:"M0 0h2v6H0z"})))),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function ot({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(React.Fragment,null,React.createElement("label",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement(n.SelectControl,{className:`modula_input_select ${s||""}`,value:e.state.value,options:t.options.map((e=>({label:e.label,value:e.value}))),onChange:e=>a(e)}),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function ut({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(React.Fragment,null,React.createElement("label",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement(n.TextControl,{type:t.inputType||"text",className:`modula_input_text ${s||""}`,value:e.state.value||"",placeholder:t.placeholder,onChange:e=>a(e)}),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function ct({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(React.Fragment,null,React.createElement("label",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement(n.TextControl,{type:"number",className:`modula_input_text ${s||""}`,min:t.min,max:t.max,value:e.state.value,onChange:e=>a(e)}),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function dt({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(React.Fragment,null,React.createElement("label",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement(n.RadioControl,{className:`modula_input_radio ${s||""}`,selected:e.state.value,options:t.options.map((e=>({label:e,value:e}))),onChange:e=>a(e)}),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function ht({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(React.Fragment,null,React.createElement("label",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement(n.TextareaControl,{className:`modula_input_text ${s||""}`,value:e.state.value,onChange:e=>a(e)}),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}const mt={modulaImageRadioGroup:"qHFQ_sMuRCESwqNiQ3H4",modulaImageRadioGroupOption:"BldaZoqoOO8Ltl6oiD7a",modulaImageRadioGroupInput:"FR6T4lX8aHa3wJv74boX",modulaImageRadioGroupLabel:"WecsCrgF1I2MiXOSQ8tg",modulaImageRadioGroupLabelChecked:"sncYWGhQxuTrdFEDBJQv"};function pt({fieldState:e,field:t,handleChange:a,className:s}){const{options:i,name:r}=t;return React.createElement("div",{className:`${mt.modulaImageRadioGroup} ${s||""}`},i.map((t=>React.createElement("div",{key:`${t.value}-${t.label}`,className:mt.modulaImageRadioGroupOption},React.createElement("input",{type:"radio",id:t.value,name:r,value:t.value,checked:e.state.value===t.value,onChange:e=>a(e.target.value),className:mt.modulaImageRadioGroupInput}),React.createElement("label",{className:`${mt.modulaImageRadioGroupLabel} ${e.state.value===t.value?mt.modulaImageRadioGroupLabelChecked:""}`,htmlFor:t.value},t.image&&""!==t.image&&React.createElement("img",{className:mt.modulaImageRadioGroupImage,src:t.image,alt:t.name}),React.createElement("p",{className:mt.modulaImageRadioGroupText},t.name))))))}function ft({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(React.Fragment,null,React.createElement("label",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement(n.RangeControl,{className:`modula_input_range ${s||""}`,initialPosition:e.state.value,value:e.state.value,onChange:e=>a(e),max:t?.max||100,min:t?.min||0}),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function vt({fieldState:e,field:t,handleChange:a}){const[s,r]=(0,i.useState)(t.src||null),l=()=>{const e=wp.media({title:"Select an image pentru fundal",button:{text:"Folosete aceast imagine"},multiple:!1});e.on("select",(()=>{const t=e.state().get("selection").first().toJSON(),s=t.id,i=t.url;a(s),r(i)})),e.open()};return React.createElement(React.Fragment,null,React.createElement("label",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement("div",{className:"modula_image_holder"},React.createElement("div",{className:"modula_image"},s&&React.createElement("img",{src:s,alt:"Selected",width:200}),!s&&React.createElement(n.Button,{isPrimary:!0,onClick:l},"Set watermark image"),s&&React.createElement("div",{className:"modula_image_buttons"},React.createElement(n.Button,{isSecondary:!0,onClick:l},"Replace"),React.createElement(n.Button,{isDestructive:!0,onClick:()=>{a(null),r(null)}},"Remove")))),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}const bt="x7O4CFe0bXBoA7IOHFIA",yt=window.wp.i18n;function gt({fieldState:e,field:t,handleChange:a,className:s}){const{options:r,name:l}=t,o=e.state.value||[],[u,c]=(0,i.useState)(!1),{state:d}=m(),h=(()=>{const e=se();return async(t={},a=!1)=>{const s=new FormData;Object.entries(t).forEach((([e,t])=>{((e,t,a)=>{Array.isArray(a)&&"object"==typeof a[0]?a.forEach(((a,s)=>{Object.entries(a).forEach((([a,i])=>{e.append(`${t}[${s}][${a}]`,i)}))})):e.append(t,a)})(s,e,t)}));try{const t=await fetch(window.ajaxurl,{method:"POST",credentials:"same-origin",body:s}),i=await t.json();return a&&await e.invalidateQueries({queryKey:["settings-tabs-query"]}),i}catch(e){throw console.error("AJAX call failed:",e),e}}})(),p=d.options?.gallery_source||"core",f=d.options?.gallery_delete_source||"keep",v=e=>o.includes(e),b=(0,i.useCallback)((()=>{const e=r.map((e=>e.value));a(e)}),[r,a]),y=(0,i.useCallback)((()=>{a([])}),[a]);return React.createElement("div",{className:`G26WUtzESwRrAfjEdxrw ${s||""}`},React.createElement("div",{className:"Vh7dzBQ1lP8kfFpbtTFA"},React.createElement("div",{className:"SSQybBDIV8OAYj8bMjq7"},React.createElement("button",{type:"button",onClick:b,className:bt},(0,yt.__)("Select All","modula-best-grid-gallery")),React.createElement("button",{type:"button",onClick:y,className:bt},(0,yt.__)("Deselect All","modula-best-grid-gallery"))),React.createElement("div",{className:"X9neYpywiG08remH3GVO"},r.map((e=>React.createElement("label",{key:e.value,className:"PURtjyCwA86PlrCJ8i45"},React.createElement("input",{type:"checkbox",name:`${l}[]`,value:e.value,checked:v(e.value),onChange:()=>{return t=e.value,void(v(t)?a(o.filter((e=>e!==t))):a([...o,t]));var t}}),React.createElement("span",{dangerouslySetInnerHTML:{__html:e.label}})))))),React.createElement(n.Button,{variant:"primary",className:`modula_field_button ${s||""}`,onClick:async()=>{c(!0);for(const e of o){const a={action:"modula_ajax_import_images",id:e,nonce:t.nonce||!1,chunk:0,source:p},s=await h(a),i={action:"modula_importer_"+p+"_gallery_import",id:e,nonce:t.nonce,clean:f,gallery_title:e,attachments:s.attachments,source:p};await h(i,!0)}c(!1)},disabled:u},u?(0,yt.__)("Migrating","modula-best-grid-gallery"):(0,yt.__)("Migrate","modula-best-grid-gallery")))}const Rt=({field:e,fieldState:t,handleChange:a})=>{switch(e.type){case"toggle":return React.createElement(nt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"options_toggle":return React.createElement(lt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s),trueValue:e.trueValue,falseValue:e.falseValue});case"select":return React.createElement(ot,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"text":return React.createElement(ut,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"number":return React.createElement(ct,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"radio":return React.createElement(dt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"textarea":return React.createElement(ht,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"ia_radio":return React.createElement(pt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"range_select":return React.createElement(ft,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"image_select":return React.createElement(vt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"checkbox_group":return React.createElement(gt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});default:return null}},Et="sAqm0q094Cmj3Fff3kKY",St=window.wp.primitives,wt=(0,te.jsx)(St.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,te.jsx)(St.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),_t=(0,te.jsx)(St.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,te.jsx)(St.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),Mt=[{value:"ab",label:"Abkhaz"},{value:"ace",label:"Acehnese"},{value:"ach",label:"Acholi"},{value:"af",label:"Afrikaans"},{value:"sq",label:"Albanian"},{value:"alz",label:"Alur"},{value:"am",label:"Amharic"},{value:"ar",label:"Arabic"},{value:"hy",label:"Armenian"},{value:"as",label:"Assamese"},{value:"awa",label:"Awadhi"},{value:"ay",label:"Aymara"},{value:"az",label:"Azerbaijani"},{value:"ban",label:"Balinese"},{value:"bm",label:"Bambara"},{value:"ba",label:"Bashkir"},{value:"eu",label:"Basque"},{value:"btx",label:"Batak Karo"},{value:"bts",label:"Batak Simalungun"},{value:"bbc",label:"Batak Toba"},{value:"be",label:"Belarusian"},{value:"bem",label:"Bemba"},{value:"bn",label:"Bengali"},{value:"bew",label:"Betawi"},{value:"bho",label:"Bhojpuri"},{value:"bik",label:"Bikol"},{value:"bs",label:"Bosnian"},{value:"br",label:"Breton"},{value:"bg",label:"Bulgarian"},{value:"bua",label:"Buryat"},{value:"yue",label:"Cantonese"},{value:"ca",label:"Catalan"},{value:"ceb",label:"Cebuano"},{value:"ny",label:"Chichewa"},{value:"zh",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"cv",label:"Chuvash"},{value:"co",label:"Corsican"},{value:"crh",label:"Crimean Tatar"},{value:"hr",label:"Croatian"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"dv",label:"Dhivehi"},{value:"din",label:"Dinka"},{value:"doi",label:"Dogri"},{value:"dov",label:"Dombe"},{value:"nl",label:"Dutch"},{value:"dz",label:"Dzongkha"},{value:"en",label:"English"},{value:"eo",label:"Esperanto"},{value:"et",label:"Estonian"},{value:"ee",label:"Ewe"},{value:"fj",label:"Fijian"},{value:"tl",label:"Filipino"},{value:"fi",label:"Finnish"},{value:"fr",label:"French"},{value:"fy",label:"Frisian"},{value:"ff",label:"Fulani"},{value:"gaa",label:"Ga"},{value:"gl",label:"Galician"},{value:"ka",label:"Georgian"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"gn",label:"Guarani"},{value:"gu",label:"Gujarati"},{value:"ht",label:"Haitian Creole"},{value:"cnh",label:"Hakha Chin"},{value:"ha",label:"Hausa"},{value:"haw",label:"Hawaiian"},{value:"iw",label:"Hebrew"},{value:"hil",label:"Hiligaynon"},{value:"hi",label:"Hindi"},{value:"hmn",label:"Hmong"},{value:"hu",label:"Hungarian"},{value:"hrx",label:"Hunsrik"},{value:"is",label:"Icelandic"},{value:"ig",label:"Igbo"},{value:"ilo",label:"Ilocano"},{value:"id",label:"Indonesian"},{value:"ga",label:"Irish"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"jw",label:"Javanese"},{value:"kn",label:"Kannada"},{value:"pam",label:"Kapampangan"},{value:"kk",label:"Kazakh"},{value:"km",label:"Khmer"},{value:"cgg",label:"Kiga"},{value:"rw",label:"Kinyarwanda"},{value:"ktu",label:"Kituba"},{value:"gom",label:"Konkani"},{value:"ko",label:"Korean"},{value:"kri",label:"Krio"},{value:"ku",label:"Kurdish (Kurmanji)"},{value:"ckb",label:"Kurdish (Sorani)"},{value:"ky",label:"Kyrgyz"},{value:"lo",label:"Lao"},{value:"ltg",label:"Latgalian"},{value:"la",label:"Latin"},{value:"lv",label:"Latvian"},{value:"lij",label:"Ligurian"},{value:"li",label:"Limburgish"},{value:"ln",label:"Lingala"},{value:"lt",label:"Lithuanian"},{value:"lmo",label:"Lombard"},{value:"lg",label:"Luganda"},{value:"luo",label:"Luo"},{value:"lb",label:"Luxembourgish"},{value:"mk",label:"Macedonian"},{value:"mai",label:"Maithili"},{value:"mak",label:"Makassar"},{value:"mg",label:"Malagasy"},{value:"ms",label:"Malay"},{value:"ms-Arab",label:"Malay (Jawi)"},{value:"ml",label:"Malayalam"},{value:"mt",label:"Maltese"},{value:"mi",label:"Maori"},{value:"mr",label:"Marathi"},{value:"chm",label:"Meadow Mari"},{value:"mni-Mtei",label:"Meiteilon (Manipuri)"},{value:"min",label:"Minang"},{value:"lus",label:"Mizo"},{value:"mn",label:"Mongolian"},{value:"my",label:"Myanmar (Burmese)"},{value:"nr",label:"Ndebele (South)"},{value:"new",label:"Nepalbhasa (Newari)"},{value:"ne",label:"Nepali"},{value:"no",label:"Norwegian"},{value:"nus",label:"Nuer"},{value:"oc",label:"Occitan"},{value:"or",label:"Odia (Oriya)"},{value:"om",label:"Oromo"},{value:"pag",label:"Pangasinan"},{value:"pap",label:"Papiamento"},{value:"ps",label:"Pashto"},{value:"fa",label:"Persian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese (Brazil)"},{value:"pa",label:"Punjabi (Gurmukhi)"},{value:"pa-Arab",label:"Punjabi (Shahmukhi)"},{value:"qu",label:"Quechua"},{value:"rom",label:"Romani"},{value:"ro",label:"Romanian"},{value:"rn",label:"Rundi"},{value:"ru",label:"Russian"},{value:"sm",label:"Samoan"},{value:"sg",label:"Sango"},{value:"sa",label:"Sanskrit"},{value:"gd",label:"Scots Gaelic"},{value:"nso",label:"Sepedi"},{value:"sr",label:"Serbian"},{value:"st",label:"Sesotho"},{value:"crs",label:"Seychellois Creole"},{value:"shn",label:"Shan"},{value:"sn",label:"Shona"},{value:"scn",label:"Sicilian"},{value:"szl",label:"Silesian"},{value:"sd",label:"Sindhi"},{value:"si",label:"Sinhala"},{value:"sk",label:"Slovak"},{value:"sl",label:"Slovenian"},{value:"so",label:"Somali"},{value:"es",label:"Spanish"},{value:"su",label:"Sundanese"},{value:"sw",label:"Swahili"},{value:"ss",label:"Swati"},{value:"sv",label:"Swedish"},{value:"tg",label:"Tajik"},{value:"ta",label:"Tamil"},{value:"tt",label:"Tatar"},{value:"te",label:"Telugu"},{value:"tet",label:"Tetum"},{value:"th",label:"Thai"},{value:"ti",label:"Tigrinya"},{value:"ts",label:"Tsonga"},{value:"tn",label:"Tswana"},{value:"tr",label:"Turkish"},{value:"tk",label:"Turkmen"},{value:"ak",label:"Twi"},{value:"uk",label:"Ukrainian"},{value:"ur",label:"Urdu"},{value:"ug",label:"Uyghur"},{value:"uz",label:"Uzbek"},{value:"vi",label:"Vietnamese"},{value:"cy",label:"Welsh"},{value:"xh",label:"Xhosa"},{value:"yi",label:"Yiddish"},{value:"yo",label:"Yoruba"},{value:"yua",label:"Yucatec Maya"},{value:"zu",label:"Zulu"},{value:"he",label:"Hebrew"},{value:"jv",label:"Javanese"},{value:"zh-CN",label:"Chinese (Simplified)"}];function Ct(){const{data:e}=ce({queryKey:["ai-settings-query"],retry:1,queryFn:async()=>await he()({path:"/modula-ai-image-descriptor/v1/ai-settings",method:"GET"})}),{state:t,dispatch:a}=m(),s=it({defaultValues:{modula_ai_api_key:e?.api_key||"",modula_ai_language:e?.language||"en",email:e?.readonly?.email,first_name:e?.readonly?.first_name,last_name:e?.readonly?.last_name,valid_key:e?.readonly?.valid_key}}),i=(e,s)=>{s.handleChange(e),console.error(s),a(f({...t.options,[s.name]:e}))},r=e?.readonly?.valid_key;return React.createElement("div",{className:"oCQCrDElmdDm07U8O0g_"},!r&&React.createElement(React.Fragment,null,React.createElement("p",{className:Et},(0,yt.__)("In order to use this powerful functionality you will first need to claim your credits.","modula-best-grid-gallery")),React.createElement("p",{className:Et},(0,yt.__)('If you already have the api key, use it in the field below or click "Claim Credits" to get a new one.',"modula-best-grid-gallery"))),React.createElement(n.Flex,{gap:4,align:"flex-start"},React.createElement(n.FlexItem,{style:{flex:2}},React.createElement(s.Field,{name:"modula_ai_api_key",children:t=>React.createElement(n.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:React.createElement(n.Flex,{justify:"space-between"},React.createElement(n.FlexItem,null,React.createElement(n.Flex,{justify:"flex-start",gap:2},React.createElement(n.FlexItem,null,(0,yt.__)("API Key","modula-best-grid-gallery")),React.createElement(n.FlexItem,null,React.createElement(n.Icon,{style:{fill:r?"green":"red"},size:r?18:14,icon:r?wt:_t,className:"modula-settings-form-valid-key"})))),React.createElement(n.FlexItem,null,r&&React.createElement(React.Fragment,null,e?.readonly?.credits," ",(0,yt.__)("Credits remaining","modula-best-grid-gallery")),!r&&React.createElement(React.Fragment,null,(0,yt.__)("Invalid API Key","modula-best-grid-gallery")))),value:t.state.value,onChange:e=>i(e,t)})})),React.createElement(n.FlexItem,{style:{flex:1}},React.createElement(s.Field,{name:"modula_ai_language",children:e=>React.createElement(n.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,yt.__)("Language used to generate reports","modula-best-grid-gallery"),value:e.state.value,options:Mt,onChange:t=>i(t,e)})}))),React.createElement(n.__experimentalSpacer,{marginTop:4,marginBottom:4}),React.createElement(n.Flex,{justify:"flex-start",gap:4,className:"Ebw3DweCDnwFHPwEje3i"},!r&&React.createElement(n.Button,{variant:"link",onClick:()=>{window.open("https://wp-modula.com/my-account","_blank")}},(0,yt.__)("Claim Credits","modula-best-grid-gallery"))))}function Ft(){const[e,t]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),[r,l]=(0,i.useState)(null);return React.createElement("div",{className:"modula-button-action"},r&&React.createElement(n.Notice,{status:r.status,isDismissible:!1,className:"modula-notice"},r.message,r.details&&React.createElement("span",{className:"modula-notice-details"}," ",r.details)),React.createElement("p",{className:"modula-description"},(0,yt.__)("With the latest update, we have changed the way the image information is handled, now the information is retrieved from the Media Library. If you wish to set your previous details for the gallery images, please click the below button.","modula-best-grid-gallery")),React.createElement(n.Button,{variant:"primary",isBusy:e,disabled:e,onClick:async()=>{t(!0),l(null);try{const e=await he()({path:"/modula-ai-image-descriptor/v1/update-alts-from-image-array",method:"POST"});e.success?l({status:"success",message:e.message,details:e.data?`(${e.data.updated_images} images from ${e.data.total_galleries} galleries)`:""}):l({status:"error",message:e.message||(0,yt.__)("Failed to update gallery images.","modula-best-grid-gallery")})}catch(e){l({status:"error",message:e.message||(0,yt.__)("An error occurred while updating gallery images.","modula-best-grid-gallery")})}finally{t(!1)}}},e?(0,yt.__)("Processing","modula-best-grid-gallery"):(0,yt.__)("Update Gallery Images","modula-best-grid-gallery")),React.createElement("div",{className:"modula-cleanup-section"},React.createElement("p",{className:"modula-description"},(0,yt.__)("Clean up your database by removing all wrongfully created galleries.","modula-best-grid-gallery")),React.createElement(n.Button,{isDestructive:!0,isBusy:a,disabled:a,onClick:async()=>{if(window.confirm((0,yt.__)("Are you sure you want to delete all trash and draft galleries? This action cannot be undone.","modula-best-grid-gallery"))){s(!0),l(null);try{const e=await he()({path:"/modula-ai-image-descriptor/v1/cleanup-galleries",method:"POST"});e.success?l({status:"success",message:e.message,details:e.data?`(${e.data.deleted_posts} galleries and ${e.data.deleted_meta} meta entries)`:""}):l({status:"error",message:e.message||(0,yt.__)("Failed to cleanup galleries.","modula-best-grid-gallery")})}catch(e){l({status:"error",message:e.message||(0,yt.__)("An error occurred while cleaning up galleries.","modula-best-grid-gallery")})}finally{s(!1)}}}},a?(0,yt.__)("Cleaning up","modula-best-grid-gallery"):(0,yt.__)("Cleanup database","modula-best-grid-gallery"))))}function Ot(){return React.createElement(React.Fragment,null,React.createElement("div",{className:"modula_field_wrapper"},React.createElement(Ct,null)),React.createElement("div",{className:"modula_field_wrapper"},React.createElement(Ft,null)))}function Tt({field:e,className:t,variant:a="primary"}){const[s,r]=(0,i.useState)(!1),l=(()=>{const e=se();return async(t,a,s=!1)=>{try{const i=await he()({path:t,method:a,data:{...s}});return await e.invalidateQueries({queryKey:["settings-tabs-query"]}),i}catch(e){throw console.error("Error on api call:",e),e}}})();return React.createElement("div",{className:`modula_field_wrapp ${t||""}`},React.createElement("span",{className:"modula_input_label"},e.label),React.createElement(n.Button,{id:e.id||"",href:e.href,variant:a,className:`modula_field_button ${t||""}`,onClick:async()=>{r(!0),e.api&&e.api?.path&&await l(e.api.path,e.api.method||"POST",e.api.data||{}),r(!1)},disabled:s},e.text),e.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:e.description}}))}function kt({field:e,className:t}){return React.createElement("div",{className:`modula_field_wrapp ${t||""}`},React.createElement("span",{className:"modula_input_label"},e.label),e.value&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:e.value}}))}function At({option:e,field:t,form:a,handleChange:s,className:i}){return React.createElement(React.Fragment,null,t.fields.map(((t,r)=>"button"===t.type?React.createElement(Tt,{key:r,field:t}):React.createElement("div",{key:`${t.name}-wrapper`,className:`modula_field_wrapp ${i||""}`},React.createElement(a.Field,{name:e?`${e}.${t.name}`:t.name},(e=>React.createElement(Rt,{field:t,fieldState:e,handleChange:s})))))),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function It({option:e,mainField:t,form:a,handleChange:s}){const[r,l]=(0,i.useState)(t.default),o=a.store.state.values?.activeToggle||"gallery";return t.group&&t.group!==o?null:React.createElement("div",{className:"modula_roles_field_wrapper"},React.createElement(n.Card,{className:"static-class Lm1A08wPHM8GclLe7ph0"},React.createElement(n.CardHeader,{className:"static-class-head Gw7t03RR8QEoNJUYqT6N"},React.createElement(a.Field,{key:`${t.name}-field`,name:e?`${e}.${t.name}`:t.name},(i=>React.createElement(nt,{fieldState:i,field:t,className:"W7HbF5OVv_JVIMby349Q",handleChange:r=>((i,r,n)=>{l(n),t.fields.forEach((t=>{const s=e?`${e}.${t.name}`:t.name;a.setFieldValue(s,n)})),s(i,r,n)})(i,t.name,r)})))),React.createElement(n.CardBody,{className:"static-class-body T7OEHZLL87xK0wy3BWIx"},t.fields.map((t=>React.createElement("div",{key:`${t.name}-wrapper`,className:"modula_role_field_wrapp"},React.createElement(a.Field,{key:`${t.name}-field`,name:e?`${e}.${t.name}`:t.name},(e=>React.createElement(nt,{fieldState:e,field:t,className:"SBWqcPmdFFcRVweI3OSD",handleChange:a=>s(e,t.name,a),disabled:!r})))))))))}function xt({field:e}){const{label:t,desc:a,buttons:s=[]}=e;return React.createElement("div",{className:"modula_upsell_field_wrapper"},t&&React.createElement("h3",null,t),a&&React.createElement("p",{dangerouslySetInnerHTML:{__html:a}}),s.length>0&&React.createElement("div",{className:"modula_upsell_buttons_wrapper"},s.map(((e,t)=>React.createElement(n.Button,{key:t,href:e.href,variant:e.variant||"primary",target:"blank",rel:"noopener noreferrer"},e.label)))))}function Nt({submenu:e,form:t}){const[a,s]=(0,i.useState)(e.options[0]?.value);return(0,i.useEffect)((()=>{t.setFieldValue("activeToggle",a)}),[a,t]),React.createElement("div",{className:`modula_submenu_toggle_wrapper ${e.class||""}`},e.options.map((({label:e,value:t})=>React.createElement(n.Button,{key:t,variant:a===t?"primary":"secondary",onClick:()=>{s(t)}},e))))}function Pt({config:e}){const{state:t,dispatch:a}=m();function s(e,t,a,s){if(!a)return e;if(a.includes(".")){const[i,r]=a.split(".");t?(e[t]=e[t]||{},e[t][i]=e[t][i]||{},e[t][i][r]=null!=s?s:""):(e[i]=e[i]||{},e[i][r]=null!=s?s:"")}else t?(e[t]=e[t]||{},e[t][a]=null!=s?s:""):e[a]=null!=s?s:""}const{option:i,fields:r=[]}=e,n=it({defaultValues:r.reduce(((e,t)=>{switch(t.type){case"combo":t.fields.forEach((t=>{s(e,i,t.name,t.default)}));break;case"role":s(e,i,t.name,t.default),t.fields.forEach((t=>{s(e,i,t.name,t.default)}));break;case"button":case"paragraph":break;default:s(e,i,t.name,t.default)}return e}),{})}),l=n.store.state.values,o=i?l[i]||{}:l,u=(e,s)=>{a(f({...t.options,[e]:s}))},c={"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,">":(e,t)=>e>t,"<":(e,t)=>e<t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t},d=(e,t,a)=>{e.handleChange(a);const s=n.store.state.values,r=i?{...s[i]}:{...s};if(t.includes(".")){const[e,s]=t.split(".");r[e]=r[e]||{},r[e][s]=a}else r[t]=a;if(i)u(i,r);else if(t.includes(".")){const[e]=t.split(".");u(e,r[e])}else u(t,a)},h=Je(n.store,(e=>e.values.activeToggle))||"";if(!e||!r)return React.createElement("p",null,"Loading settings...");if(0===r.length)return React.createElement("div",{className:"modula_no_settings"}," No settings found.");const p=i||"default";return React.createElement(React.Fragment,null,React.createElement("form",{className:`modula_options_form modula_${p}_form`},e.submenu&&React.createElement(Nt,{form:n,submenu:e.submenu}),r.map(((e,t)=>{return(a=e.conditions)&&!a.every((({field:e,comparison:t,value:a})=>{var s;const i=e.split(".");let r=o;for(const e of i)r=r?.[e];return c[t](null!==(s=r)&&void 0!==s?s:null,a)}))?null:"role"===e.type?React.createElement(It,{key:t,option:i,mainField:e,form:n,handleChange:d}):e.group&&e.group!==h?null:"modula_ai"===e.type?React.createElement(Ot,{key:t}):"combo"===e.type?React.createElement("div",{key:t,className:"modula_field_wrapper"},React.createElement(At,{option:i,field:e,form:n,handleChange:d})):"button"===e.type?React.createElement("div",{key:t,className:"modula_field_wrapper"},React.createElement(Tt,{field:e})):"paragraph"===e.type?React.createElement("div",{key:t,className:"modula_field_wrapper"},React.createElement(kt,{field:e})):"upsell"===e.type?React.createElement(xt,{key:t,field:e}):React.createElement("div",{key:e.name,className:"modula_field_wrapper"},React.createElement("div",{className:"modula_field_wrapp"},React.createElement(n.Field,{name:i?`${i}.${e.name}`:e.name},(t=>React.createElement(Rt,{field:e,fieldState:t,handleChange:d})))));var a}))))}var Dt=class extends G{#D;#V;#o;constructor(e){super(),this.mutationId=e.mutationId,this.#V=e.mutationCache,this.#D=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#D.includes(e)||(this.#D.push(e),this.clearGcTimeout(),this.#V.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#D=this.#D.filter((t=>t!==e)),this.scheduleGc(),this.#V.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#D.length||("pending"===this.state.status?this.scheduleGc():this.#V.remove(this))}continue(){return this.#o?.continue()??this.execute(this.state.variables)}async execute(e){this.#o=H({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#d({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#d({type:"pause"})},onContinue:()=>{this.#d({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#V.canRun(this)});const t="pending"===this.state.status,a=!this.#o.canStart();try{if(!t){this.#d({type:"pending",variables:e,isPaused:a}),await(this.#V.config.onMutate?.(e,this));const t=await(this.options.onMutate?.(e));t!==this.state.context&&this.#d({type:"pending",context:t,variables:e,isPaused:a})}const s=await this.#o.start();return await(this.#V.config.onSuccess?.(s,e,this.state.context,this)),await(this.options.onSuccess?.(s,e,this.state.context)),await(this.#V.config.onSettled?.(s,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(s,null,e,this.state.context)),this.#d({type:"success",data:s}),s}catch(t){try{throw await(this.#V.config.onError?.(t,e,this.state.context,this)),await(this.options.onError?.(t,e,this.state.context)),await(this.#V.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,t,e,this.state.context)),t}finally{this.#d({type:"error",error:t})}}finally{this.#V.runNext(this)}}#d(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),j.batch((()=>{this.#D.forEach((t=>{t.onMutationUpdate(e)})),this.#V.notify({mutation:this,type:"updated",action:e})}))}},Vt=class extends v{#h;#b=void 0;#q;#j;constructor(e,t){super(),this.#h=e,this.setOptions(t),this.bindMethods(),this.#Q()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#h.defaultMutationOptions(e),T(this.options,t)||this.#h.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#q,observer:this}),t?.mutationKey&&this.options.mutationKey&&C(t.mutationKey)!==C(this.options.mutationKey)?this.reset():"pending"===this.#q?.state.status&&this.#q.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#q?.removeObserver(this)}onMutationUpdate(e){this.#Q(),this.#P(e)}getCurrentResult(){return this.#b}reset(){this.#q?.removeObserver(this),this.#q=void 0,this.#Q(),this.#P()}mutate(e,t){return this.#j=t,this.#q?.removeObserver(this),this.#q=this.#h.getMutationCache().build(this.#h,this.options),this.#q.addObserver(this),this.#q.execute(e)}#Q(){const e=this.#q?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#b={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#P(e){j.batch((()=>{if(this.#j&&this.hasListeners()){const t=this.#b.variables,a=this.#b.context;"success"===e?.type?(this.#j.onSuccess?.(e.data,t,a),this.#j.onSettled?.(e.data,null,t,a)):"error"===e?.type&&(this.#j.onError?.(e.error,t,a),this.#j.onSettled?.(void 0,e.error,t,a))}this.listeners.forEach((e=>{e(this.#b)}))}))}};function qt(){const{state:e,dispatch:t}=m(),a=(()=>{const e=se();return function(e){const t=se(void 0),[a]=s.useState((()=>new Vt(t,e)));s.useEffect((()=>{a.setOptions(e)}),[a,e]);const i=s.useSyncExternalStore(s.useCallback((e=>a.subscribe(j.batchCalls(e))),[a]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),r=s.useCallback(((e,t)=>{a.mutate(e,t).catch(le)}),[a]);if(i.error&&ne(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:r,mutateAsync:i.mutate}}({mutationFn:async e=>await(async e=>await he()({path:"/modula-best-grid-gallery/v1/general-settings",method:"POST",data:e}))(e),onSuccess:async()=>{await Promise.all([e.invalidateQueries({queryKey:["settings-tabs-query"]}),e.invalidateQueries({queryKey:["ai-settings-query"]})])}})})(),[r,l]=(0,i.useState)(!1),o=0===Object.keys(e.options||{}).length;return(0,i.useEffect)((()=>{if(r){const e=setTimeout((()=>l(!1)),3e3);return()=>clearTimeout(e)}}),[r]),React.createElement("div",{className:"modula_save_settings_wrap"},React.createElement(n.Button,{className:"modula_save_settings_button",onClick:()=>{a.mutate(e.options,{onSuccess:()=>{t(f({})),l(!0)}})},disabled:a.isLoading||o,variant:"primary"},a.isLoading?(0,yt.__)("Saving","modula-best-grid-gallery"):(0,yt.__)("Save Changes","modula-best-grid-gallery")),r&&React.createElement("div",{className:"modula_save_notice slide-in"},(0,yt.__)("Settings saved successfully!","modula-best-grid-gallery")))}function jt(){const{state:e}=m(),{data:t,isLoading:a}=me();if(!t||a)return null;const s=t.find((t=>t.slug===e.activeTab));return s&&s.subtabs?React.createElement("div",{className:"modula-page-content"},React.createElement(n.Panel,{className:"modula-accordion-wrapper",header:s.label},Object.entries(s.subtabs).map((([e,t])=>React.createElement(n.PanelBody,{className:"modula-accordion-pannel",key:e,title:React.createElement("span",{className:"modula-accordion-title"},React.createElement("span",{className:"modula-triangle-icon"}),React.createElement("span",null,t.label),t.badge&&React.createElement("span",{className:"modula-pro-badge"}," ",t.badge," ")),initialOpen:!0},React.createElement(Pt,{config:t?.config||{}})))),(void 0===s.save||!1!==s.save)&&React.createElement(qt,null))):null}function Qt(){return React.createElement(React.Fragment,null,React.createElement(r,null),React.createElement(pe,null),React.createElement(jt,null))}var Bt=class extends v{constructor(e={}){super(),this.config=e,this.#B=new Map}#B;build(e,t,a){const s=t.queryKey,i=t.queryHash??M(s,t);let r=this.get(i);return r||(r=new z({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:a,defaultOptions:e.getQueryDefaults(s)}),this.add(r)),r}add(e){this.#B.has(e.queryHash)||(this.#B.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#B.get(e.queryHash);t&&(e.destroy(),t===e&&this.#B.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){j.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#B.get(e)}getAll(){return[...this.#B.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>w(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>w(e,t))):t}notify(e){j.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){j.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){j.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},Lt=class extends v{constructor(e={}){super(),this.config=e,this.#L=new Set,this.#$=new Map,this.#K=0}#L;#$;#K;build(e,t,a){const s=new Dt({mutationCache:this,mutationId:++this.#K,options:e.defaultMutationOptions(t),state:a});return this.add(s),s}add(e){this.#L.add(e);const t=$t(e);if("string"==typeof t){const a=this.#$.get(t);a?a.push(e):this.#$.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#L.delete(e)){const t=$t(e);if("string"==typeof t){const a=this.#$.get(t);if(a)if(a.length>1){const t=a.indexOf(e);-1!==t&&a.splice(t,1)}else a[0]===e&&this.#$.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=$t(e);if("string"==typeof t){const a=this.#$.get(t),s=a?.find((e=>"pending"===e.state.status));return!s||s===e}return!0}runNext(e){const t=$t(e);if("string"==typeof t){const a=this.#$.get(t)?.find((t=>t!==e&&t.state.isPaused));return a?.continue()??Promise.resolve()}return Promise.resolve()}clear(){j.batch((()=>{this.#L.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#L.clear(),this.#$.clear()}))}getAll(){return Array.from(this.#L)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>_(t,e)))}findAll(e={}){return this.getAll().filter((t=>_(e,t)))}notify(e){j.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return j.batch((()=>Promise.all(e.map((e=>e.continue().catch(y))))))}};function $t(e){return e.options.scope?.id}function Kt(e){return{onFetch:(t,a)=>{const s=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,r=t.state.data?.pages||[],n=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},o=0;const u=async()=>{let a=!1;const u=V(t.options,t.fetchOptions),c=async(e,s,i)=>{if(a)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const r={queryKey:t.queryKey,pageParam:s,direction:i?"backward":"forward",meta:t.options.meta};var n;n=r,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?a=!0:t.signal.addEventListener("abort",(()=>{a=!0})),t.signal)});const l=await u(r),{maxPages:o}=t.options,c=i?P:N;return{pages:c(e.pages,l,o),pageParams:c(e.pageParams,s,o)}};if(i&&r.length){const e="backward"===i,t={pages:r,pageParams:n},a=(e?Ht:Ut)(s,t);l=await c(t,a,e)}else{const t=e??r.length;do{const e=0===o?n[0]??s.initialPageParam:Ut(s,l);if(o>0&&null==e)break;l=await c(l,e),o++}while(o<t)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a):t.fetchFn=u}}}function Ut(e,{pages:t,pageParams:a}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,a[s],a):void 0}function Ht(e,{pages:t,pageParams:a}){return t.length>0?e.getPreviousPageParam?.(t[0],t,a[0],a):void 0}const Gt=new class{#U;#V;#u;#H;#G;#z;#W;#J;constructor(e={}){this.#U=e.queryCache||new Bt,this.#V=e.mutationCache||new Lt,this.#u=e.defaultOptions||{},this.#H=new Map,this.#G=new Map,this.#z=0}mount(){this.#z++,1===this.#z&&(this.#W=q.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#U.onFocus())})),this.#J=Q.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#U.onOnline())})))}unmount(){this.#z--,0===this.#z&&(this.#W?.(),this.#W=void 0,this.#J?.(),this.#J=void 0)}isFetching(e){return this.#U.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#V.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#U.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),a=this.#U.build(this,t),s=a.state.data;return void 0===s?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(E(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#U.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,a){const s=this.defaultQueryOptions({queryKey:e}),i=this.#U.get(s.queryHash),r=i?.state.data,n=function(e,t){return"function"==typeof e?e(t):e}(t,r);if(void 0!==n)return this.#U.build(this,s).setData(n,{...a,manual:!0})}setQueriesData(e,t,a){return j.batch((()=>this.#U.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,a)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#U.get(t.queryHash)?.state}removeQueries(e){const t=this.#U;j.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const a=this.#U,s={type:"active",...e};return j.batch((()=>(a.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries(s,t))))}cancelQueries(e,t={}){const a={revert:!0,...t},s=j.batch((()=>this.#U.findAll(e).map((e=>e.cancel(a)))));return Promise.all(s).then(y).catch(y)}invalidateQueries(e,t={}){return j.batch((()=>{if(this.#U.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType)return Promise.resolve();const a={...e,type:e?.refetchType??e?.type??"active"};return this.refetchQueries(a,t)}))}refetchQueries(e,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},s=j.batch((()=>this.#U.findAll(e).filter((e=>!e.isDisabled())).map((e=>{let t=e.fetch(void 0,a);return a.throwOnError||(t=t.catch(y)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(s).then(y)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const a=this.#U.build(this,t);return a.isStaleByTime(E(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(y).catch(y)}fetchInfiniteQuery(e){return e.behavior=Kt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(y).catch(y)}ensureInfiniteQueryData(e){return e.behavior=Kt(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Q.isOnline()?this.#V.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#U}getMutationCache(){return this.#V}getDefaultOptions(){return this.#u}setDefaultOptions(e){this.#u=e}setQueryDefaults(e,t){this.#H.set(C(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#H.values()],a={};return t.forEach((t=>{F(e,t.queryKey)&&Object.assign(a,t.defaultOptions)})),a}setMutationDefaults(e,t){this.#G.set(C(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#G.values()];let a={};return t.forEach((t=>{F(e,t.mutationKey)&&(a={...a,...t.defaultOptions})})),a}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#u.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=M(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===D&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#u.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#U.clear(),this.#V.clear()}};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("modula-settings-app");e&&(0,i.createRoot)(e).render(React.createElement(ie,{client:Gt},React.createElement(h,null,React.createElement(Qt,null))))}))})();