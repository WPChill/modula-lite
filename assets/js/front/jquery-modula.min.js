function modulaInViewport(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top-jQuery(window).height()<=-100&&e.top-jQuery(window).height()>=-400||e.bottom<=jQuery(window).height()}jQuery(document).on("vc-full-width-row-single vc-full-width-row",(function(t,e){jQuery("body").find(".modula").length>0&&jQuery(window).trigger("modula-update")})),jQuery(window).on("elementor/frontend/init",(function(){window.elementorFrontend&&window.elementorFrontend.hooks.addAction("frontend/element_ready/global",(function(t){jQuery("body").find(".modula").length}))})),function(t,e,i,o){var a="modulaGallery",n={resizer:"/",keepArea:!0,type:"creative-gallery",columns:12,height:800,desktopHeight:800,mobileHeight:800,tabletHeight:800,gutter:10,desktopGutter:10,mobileGutter:10,tabletGutter:10,enableTwitter:!1,enableFacebook:!1,enableWhatsapp:!1,enablePinterest:!1,enableLinkedin:!1,enableEmail:!1,lazyLoad:0,initLightbox:!1,lightbox:"fancybox",lightboxOpts:{},inView:!1};function s(e,i){this.element=e,this.$element=t(e),this.$itemsCnt=this.$element.find(".modula-items"),this.$items=this.$itemsCnt.find(".modula-item"),this.options=t.extend({},n,i),this._defaults=n,this._name=a,this.tiles=[],this.$tilesCnt=null,this.completed=!1,this.lastWidth=0,this.resizeTO=0,this.isIsotope=!1,this.isLazyLoaded=!0,this.init()}s.prototype.init=function(){var o=this,a=i.documentElement.clientWidth;this.options.gutter=a<=568?this.options.mobileGutter:a<=768?this.options.tabletGutter:this.options.desktopGutter,t(i).trigger("modula_api_before_init",[o]),"custom-grid"===this.options.type?this.createCustomGallery():"creative-gallery"==this.options.type?this.createGrid():"grid"==this.options.type&&("automatic"==this.options.grid_type?this.createAutoGrid():this.createColumnsGrid()),"custom-grid"===this.options.type&&t(e).height()<t("html").height()&&o.onResize(o),t(e).resize((function(){o.onResize(o)}));new ResizeObserver((t=>{o.onResize(o)})).observe(o.$element[0]),t(e).on("modula-update",(function(){o.onResize(o)})),t(i).on("lazyloaded",(function(e){var i,a,n=t(e.target);"modula"==n.data("source")&&(n.data("size",{width:n.width(),height:n.height()}),(i=n.parents(".modula-item")).addClass("tg-loaded"),a=o.$items.not(".jtg-hidden").index(i),o.placeImage(a),o.isIsotope&&void 0!==o.$itemsCnt.data("modulaisotope")&&o.$itemsCnt.modulaisotope("layout"),"grid"==o.options.type&&"automatic"==o.options.grid_type&&o.$itemsCnt.justifiedGallery())})),o.options.inView&&jQuery(e).on("DOMContentLoaded load resize scroll",(function(){modulaInViewport(o.$element)&&o.$element.addClass("modula-loaded-scale")})),this.setupSocial(),jQuery(o.$element).addClass("modula-gallery-initialized"),this.options.onComplete&&this.options.onComplete(),"fancybox"!=o.options.lightbox||o.options.initLightbox||this.initLightbox(),t(i).trigger("modula_api_after_init",[o])},s.prototype.initLightbox=function(){var e=this;e.$element.on("click",".modula-no-follow",(function(t){t.preventDefault()})),e.$element.on("click keypress",".modula-item-link:not( .modula-simple-link )",(function(i){if(13===i.which||"click"===i.type){i.preventDefault();var o=jQuery(this),a=t.map(e.$items,(function(t){if(jQuery(t).find(".modula-item-link:not( .modula-no-follow )").length>0){var e=jQuery(t).find(".modula-item-link:not( .modula-simple-link )"),i=jQuery(t).find(".pic");return{src:i.data("full"),opts:{$thumb:i.parents(".modula-item"),caption:e.data("caption"),alt:i.attr("alt"),image_id:e.attr("data-image-id"),title:i.attr("title")},current:jQuery(t).is(o.parents(".modula-item"))}}})),n=t.map(a,(function(t,e){if(t.current)return e}))[0];jQuery.modulaFancybox.open(a,e.options.lightboxOpts,n)}}))},s.prototype.trunc=function(t){return Math.trunc?Math.trunc(t):(t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t)},s.prototype.createCustomGallery=function(){var e,o=this,a=this.$element.find(".modula-items").width(),n=this,s=this.options.columns,r=i.documentElement.clientWidth;"1"==this.options.enableResponsive&&(r<=568?s=this.options.mobileColumns:r<=768&&(s=this.options.tabletColumns)),e=this.options.gutter>0?(a-this.options.gutter*(s-1))/s:Math.floor(a/s*1e3)/1e3,this.$items.not(".jtg-hidden").each((function(i,a){var r,d,l,h,m={};r=t(a).data("width"),d=t(a).data("height"),r>12&&(r=12),"1"==n.options.enableResponsive&&(l=r,h=d,1==s?d=(r=1)*h/l:((r=Math.round(s*l/12))<1&&(r=1),(d=Math.round(r*h/l))<1&&(d=1))),m.width=e*r+n.options.gutter*(r-1),m.height=Math.round(e)*d+n.options.gutter*(d-1),t(a).data("size",m).addClass("tiled").addClass(m.width>m.height?"tile-h":"tile-v").data("position"),t(a).css(t(a).data("size")),t(a).find(".figc").css({width:t(a).data("size").width,height:t(a).data("size").height}),o.loadImage(i)}));var d={itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(n.options.gutter)}};this.$itemsCnt.modulaisotope(d),this.isIsotope=!0},s.prototype.createGrid=function(){var e=this,o=i.documentElement.clientWidth;e.options.height=o<=568?e.options.mobileHeight:o<=768?e.options.tabletHeight:e.options.desktopHeight,this.$itemsCnt.data("area",this.$itemsCnt.width()*this.options.height),this.lastWidth=this.$itemsCnt.width();for(var a=0;a<this.$items.not(".jtg-hidden").length;a++)this.tiles.push(e.getSlot());if(this.tiles.sort((function(t,e){return t.position-e.position})),this.$items.not(".jtg-hidden").each((function(i,o){var a=e.tiles[i];t(o).data("size",a),t(o).addClass("tiled").addClass(a.width>a.height?"tile-h":"tile-v").data("position"),t(o).css({width:a.width,height:a.height}),t(o).find(".figc").css({width:a.width,height:a.height}),e.loadImage(i)})),!this.isIsotope){var n={resizesContainer:!1,itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(e.options.gutter)}};this.$itemsCnt.modulaisotope(n),this.isIsotope=!0}},s.prototype.createAutoGrid=function(){this.$itemsCnt.justifiedGallery({rowHeight:this.options.rowHeight,margins:this.options.gutter,lastRow:this.options.lastRow,captions:!1,border:0,imgSelector:"img.pic",cssAnimation:!0,imagesAnimationDuration:700})},s.prototype.createColumnsGrid=function(){var t=this;this.$itemsCnt.modulaisotope({itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(this.options.gutter)}}),this.$items.each((function(e,i){t.loadImage(e)})),this.isIsotope=!0},s.prototype.getSlot=function(){if(0==this.tiles.length)return i={top:0,left:0,width:this.$itemsCnt.width(),height:this.options.height,area:this.$itemsCnt.width()*this.options.height,position:0};for(var t=0,e=0;e<this.tiles.length;e++){(i=this.tiles[e]).area>this.tiles[t].area&&(t=e)}var i={},o=this.tiles[t];if(o.width>o.height){var a=o.width/2*this.options.randomFactor;o.prevWidth=o.width,o.width=Math.floor(o.width/2+a*(Math.random()-.5)),i={top:o.top,left:o.left+o.width+this.options.gutter,width:o.prevWidth-o.width-this.options.gutter,height:o.height}}else{a=o.height/2*this.options.randomFactor;o.prevHeight=o.height,o.height=Math.floor(o.height/2+a*(Math.random()-.5)),i={left:o.left,top:o.top+o.height+this.options.gutter,width:o.width,height:o.prevHeight-o.height-this.options.gutter}}return i.area=i.width*i.height,i.position=1e3*i.top+i.left,o.position=1e3*o.top+o.left,this.tiles[t]=o,this.tiles[t].area=o.width*o.height,i},s.prototype.reset=function(){var e=this;e.tiles=[],"custom-grid"===this.options.type?this.createCustomGallery():"creative-gallery"==this.options.type?this.createGrid():"grid"==this.options.type&&("automatic"==this.options.grid_type?this.createAutoGrid():this.createColumnsGrid()),e.lastWidth=e.$itemsCnt.width(),t(i).trigger("modula_api_reset",[e])},s.prototype.onResize=function(t){if(t.lastWidth!=t.$itemsCnt.width()){var e=i.documentElement.clientWidth;t.options.gutter=e<=568?t.options.mobileGutter:e<=768?t.options.tabletGutter:this.options.desktopGutter,clearTimeout(t.resizeTO),t.resizeTO=setTimeout((function(){if(t.options.keepArea){var e=t.$itemsCnt.data("area");t.$itemsCnt.height(e/t.$itemsCnt.width())}t.reset(),t.isIsotope&&t.$itemsCnt.modulaisotope({packery:{gutter:parseInt(t.options.gutter)}}).modulaisotope("layout")}),100)}},s.prototype.loadImage=function(t){var e=this,i=e.$items.not(".jtg-hidden").eq(t).find(".pic"),o={};if("0"==e.options.lazyLoad){var a=new Image;a.onload=function(){o={width:this.width,height:this.height},i.data("size",o),e.placeImage(t)},"undefined"!=i.attr("src")?a.src=i.attr("src"):a.src=i.data("src")}else e.placeImage(t)},s.prototype.placeImage=function(t){if("grid"!=this.options.type){var e=this.$items.not(".jtg-hidden").eq(t),i=e.find(".pic"),o=e.data("size"),a=i.data("size");if(void 0!==o&&void 0!==a){o.width,o.height;var n=a.width/a.height,s=i.data("valign")?i.data("valign"):"middle",r=i.data("halign")?i.data("halign"):"center",d={top:"auto",bottom:"auto",left:"auto",right:"auto",width:"auto",height:"auto",margin:"0",maxWidth:"999em"};if(o.width*a.height/a.width>o.height)switch(d.width=o.width,d.left=0,s){case"top":d.top=0;break;case"middle":d.top=0-(o.width*(1/n)-o.height)/2;break;case"bottom":d.bottom=0}else switch(d.height=o.height,d.top=0,r){case"left":d.left=0;break;case"center":d.left=0-(o.height*n-o.width)/2;break;case"right":d.right=0}e.hasClass("effect-under")&&(d.top=d.top-e.find(".modula-item-content").height()),i.css(d),this.$items.not(".jtg-hidden").eq(t).addClass("tg-loaded")}}},s.prototype.setupSocial=function(){(this.options.enableTwitter||this.options.enableFacebook||this.options.enablePinterest||this.options.enableLinkedin||this.options.enableWhatsapp||this.options.enableEmail)&&u(this.$items),this.options.enableTwitter&&r(this.$items,this),this.options.enableFacebook&&d(this.$items,this),this.options.enablePinterest&&h(this.$items,this),this.options.enableLinkedin&&m(this.$items,this),this.options.enableWhatsapp&&l(this.$items,this),this.options.enableEmail&&c(this.$items,this)},s.prototype.destroy=function(){this.isPackeryActive&&(this.$itemsCnt.packery("destroy"),this.isPackeryActive=!1)};var r=function(o,a){o.find(".modula-icon-twitter").click((function(o){o.preventDefault();let a=t(this),n=t(this).parents(".modula-item").find("img.pic"),s=(a.data("modula-image-src"),e.location.href),r=a.data("modula-item-id"),d=a.data("modula-gallery-id");var l=n.data("caption"),h=n.attr("title"),m=i.title;const c=new URL(s),u=new URLSearchParams(c.search);if(void 0!==d&&u.set("modula_gallery_id",encodeURIComponent(d)),void 0!==r&&u.set("modula_image_id",encodeURIComponent(r)),"object"==typeof modulaMetaVars&&0!==Object.keys(modulaMetaVars).length)for(const[t,e]of Object.entries(modulaMetaVars)){let t=a.data(e);void 0!==t&&u.set(e,t)}i.dispatchEvent(new CustomEvent("modula_social_url_params",{detail:{url:c,params:u,meta:modulaMetaVars}}));const p=c.origin+c.pathname+"?"+decodeURIComponent(u.toString());return h.length>0&&l.length>0?m=t.trim(h)+" - "+t.trim(l):h.length>0?m=t.trim(h):l.length>0&&(m=t.trim(l)),e.open("https://twitter.com/intent/tweet?url="+encodeURIComponent(p)+"&text="+encodeURI(m),"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},d=function(o,a){o.find(".modula-icon-facebook").click((function(o){o.preventDefault();let a=t(this),n=(t(this).parents(".modula-item").find("img.pic"),a.data("modula-image-src"),e.location.href),s=a.data("modula-item-id"),r=a.data("modula-gallery-id");const d=new URL(n),l=new URLSearchParams(d.search);if(void 0!==r&&l.set("modula_gallery_id",encodeURIComponent(r)),void 0!==s&&l.set("modula_image_id",encodeURIComponent(s)),"object"==typeof modulaMetaVars&&0!==Object.keys(modulaMetaVars).length)for(const[t,e]of Object.entries(modulaMetaVars)){let t=a.data(e);void 0!==t&&l.set(e,t)}i.dispatchEvent(new CustomEvent("modula_social_url_params",{detail:{url:d,params:l,meta:modulaMetaVars}}));const h=d.origin+d.pathname+"?"+decodeURIComponent(l.toString());var m="//www.facebook.com/sharer.php?u="+encodeURIComponent(h);return e.open(m,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},l=function(o,a){o.find(".modula-icon-whatsapp").click((function(o){o.preventDefault();let a=t(this),n=(t(this).parents(".modula-item").find("img.pic"),a.data("modula-image-src"),e.location.href),s=a.data("modula-item-id"),r=a.data("modula-gallery-id");const d=new URL(n),l=new URLSearchParams(d.search);if(void 0!==r&&l.set("modula_gallery_id",encodeURIComponent(r)),void 0!==s&&l.set("modula_image_id",encodeURIComponent(s)),"object"==typeof modulaMetaVars&&0!==Object.keys(modulaMetaVars).length)for(const[t,e]of Object.entries(modulaMetaVars)){let t=a.data(e);void 0!==t&&l.set(e,t)}i.dispatchEvent(new CustomEvent("modula_social_url_params",{detail:{url:d,params:l,meta:modulaMetaVars}}));const h=d.origin+d.pathname+"?"+decodeURIComponent(l.toString());return e.open("https://api.whatsapp.com/send?text="+encodeURIComponent(h)+"&preview_url=true","ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},h=function(o,a){o.find(".modula-icon-pinterest").click((function(o){o.preventDefault();let a=t(this),n=t(this).parents(".modula-item").find("img.pic"),s=a.data("modula-image-src"),r=e.location.href,d=a.data("modula-item-id"),l=a.data("modula-gallery-id");var h=n.data("caption"),m=n.attr("title");const c=new URL(r),u=new URLSearchParams(c.search);if(void 0!==l&&u.set("modula_gallery_id",encodeURIComponent(l)),void 0!==d&&u.set("modula_image_id",encodeURIComponent(d)),"object"==typeof modulaMetaVars&&0!==Object.keys(modulaMetaVars).length)for(const[t,e]of Object.entries(modulaMetaVars)){let t=a.data(e);void 0!==t&&u.set(e,t)}i.dispatchEvent(new CustomEvent("modula_social_url_params",{detail:{url:c,params:u,meta:modulaMetaVars}}));const p=c.origin+c.pathname+"?"+decodeURIComponent(u.toString());var g=i.title;m.length>0?g=t.trim(m):h.length>0&&(g=t.trim(h));var f="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(p)+"&description="+encodeURI(g);return void 0!==s&&s.length>0&&(f+="&media="+function(t){var e=i.createElement("img");return e.src=t,t=e.src,e.src=null,t}(s)),e.open(f,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},m=function(o,a){o.find(".modula-icon-linkedin").click((function(o){o.preventDefault();let a=t(this),n=(t(this).parents(".modula-item").find("img.pic"),a.data("modula-image-src"),e.location.href),s=a.data("modula-item-id"),r=a.data("modula-gallery-id");const d=new URL(n),l=new URLSearchParams(d.search);if(void 0!==r&&l.set("modula_gallery_id",encodeURIComponent(r)),void 0!==s&&l.set("modula_image_id",encodeURIComponent(s)),"object"==typeof modulaMetaVars&&0!==Object.keys(modulaMetaVars).length)for(const[t,e]of Object.entries(modulaMetaVars)){let t=a.data(e);void 0!==t&&l.set(e,t)}i.dispatchEvent(new CustomEvent("modula_social_url_params",{detail:{url:d,params:l,meta:modulaMetaVars}}));const h=d.origin+d.pathname+"?"+decodeURIComponent(l.toString());var m="//linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(h);return e.open(m,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},c=function(o,a){o.find(".modula-icon-email").click((function(o){var n=a.options.email_subject;let s=t(this),r=(t(this).parents(".modula-item").find("img.pic"),s.data("modula-image-src")),d=e.location.href,l=s.data("modula-item-id"),h=s.data("modula-gallery-id");const m=new URL(d),c=new URLSearchParams(m.search);if(void 0!==h&&c.set("modula_gallery_id",encodeURIComponent(h)),void 0!==l&&c.set("modula_image_id",encodeURIComponent(l)),"object"==typeof modulaMetaVars&&0!==Object.keys(modulaMetaVars).length)for(const[t,e]of Object.entries(modulaMetaVars)){let t=s.data(e);void 0!==t&&c.set(e,t)}i.dispatchEvent(new CustomEvent("modula_social_url_params",{detail:{url:m,params:c,meta:modulaMetaVars}}));const u=m.origin+m.pathname+"?"+decodeURIComponent(c.toString());var p=a.options.email_message.replace("%%image_link%%",r).replace("%%gallery_link%%",u),g="mailto:?subject="+encodeURIComponent(n)+"&body="+encodeURIComponent(p);return e.open(g,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},u=function(e){e.find(".jtg-social-mobile").click((function(e){e.preventDefault(),t(".jtg-social-mobile").not(this).removeClass("modula-show-socials"),t(this).toggleClass("modula-show-socials"),p(t(this).find(".jtg-social-mobile-icons"))&&t(this).addClass("modula-socials-right")}))},p=function(t){var o=t[0].getBoundingClientRect(),a=e.innerWidth||i.documentElement.clientWidth;return o.left<0||o.right>a};t.fn[a]=function(e){var i,n=arguments;return e===o||"object"==typeof e?this.each((function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new s(this,e))})):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each((function(){var o=t.data(this,"plugin_"+a);o instanceof s&&"function"==typeof o[e]&&(i=o[e].apply(o,Array.prototype.slice.call(n,1))),"destroy"===e&&t.data(this,"plugin_"+a,null)})),i!==o?i:this):void 0}}(jQuery,window,document),jQuery(document).ready((function(){var t=jQuery(".modula.modula-gallery");jQuery.each(t,(function(){var t=jQuery(this).data("config");jQuery(this).modulaGallery(t)}))})),jQuery(document).on("elementor/popup/show",((t,e,i)=>{var o=jQuery("#elementor-popup-modal-"+e).find(".modula.modula-gallery");jQuery.each(o,(function(){var t=jQuery(this).data("config");jQuery(this).modulaGallery(t)}))}));